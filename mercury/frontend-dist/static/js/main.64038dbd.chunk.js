(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{193:function(e,t,n){},293:function(e,t,n){},294:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n(39),i=n(313),s=n(5),r=n(11),c=n(18),l=n(6),d=n.n(l),u=n(13),b=n(26),p=n(21),j=n(126),h=n(75),v=n.n(h),f=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=sessionStorage.getItem("sessionId");return null!==t&&!0!==e||(t=Object(j.v4)(),sessionStorage.setItem("sessionId",t)),t},m=function(e){"undefined"!==typeof e&&e?i.a.defaults.headers.common.Authorization="Token "+e:delete i.a.defaults.headers.common.Authorization},x=function(e,t){i.a.get(e,{responseType:"blob"}).then((function(e){v()(e.data,t)})).catch((function(e){p.b.error("Error during ".concat(t," download"))}))},O=null;localStorage.getItem("token")&&(O=localStorage.getItem("token"),m(O));var g={token:O,username:"",user:{pk:0,username:"",first_name:"",last_name:"",email:""}},y=Object(b.b)({name:"auth",initialState:g,reducers:{setToken:function(e,t){e.token=t.payload,m(e.token),e.token?localStorage.setItem("token",e.token):localStorage.removeItem("token")},setUsername:function(e,t){e.username=t.payload?t.payload:"",e.username&&""!==e.username?localStorage.setItem("username",e.username):localStorage.removeItem("username")},setUserInfo:function(e,t){e.user=t.payload}}}),w=y.reducer,k=y.actions,N=k.setToken,S=k.setUsername,_=k.setUserInfo,T=function(e){return e.auth.token},P=function(e){return e.auth.username},C=function(e){return e.auth.user},R=n(8),E=(n(193),n(0));function A(){return Object(E.jsx)("div",{style:{color:"white",padding:"5px",float:"right"},children:Object(E.jsxs)(c.b,{to:"/login",className:"btn btn-primary btn-sm ",children:[Object(E.jsx)("i",{className:"fa fa-sign-in","aria-hidden":"true"})," Log in"]})})}function L(e){var t=e.username,n=Object(s.b)(),a=Object(r.o)();return Object(E.jsx)("div",{children:Object(E.jsxs)("div",{className:"dropdown",style:{float:"right"},children:[Object(E.jsx)("a",{className:"btn btn-secondary btn-sm dropdown-toggle",style:{margin:"5px"},href:"#",role:"button",id:"dropdownMenuLink","data-bs-toggle":"dropdown","aria-expanded":"false",children:t}),Object(E.jsxs)("ul",{className:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdownMenuLink",children:[Object(E.jsx)("li",{children:Object(E.jsxs)(c.b,{className:"dropdown-item",to:"/account",children:[Object(E.jsx)("i",{className:"fa fa-user","aria-hidden":"true"})," Account"]})}),Object(E.jsx)("li",{children:Object(E.jsx)("hr",{className:"dropdown-divider"})}),Object(E.jsx)("li",{children:Object(E.jsxs)(c.b,{to:"/",className:"dropdown-item",onClick:function(){return n(function(e){return function(){var t=Object(u.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=4,i.a.post("/api/v1/auth/logout/");case 4:p.b.success("Log out successfull"),n(N("")),n(S("")),e("/"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),p.b.error("Problem during log out");case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(a))},children:[Object(E.jsx)("i",{className:"fa fa-sign-out","aria-hidden":"true"})," Log out"]})})]})]})})}function D(e){var t=e.isSitePublic,n=e.username,a=e.logoSrc,o=e.navbarColor,i="",s={};return""===o?i="bg-dark":s={backgroundColor:o},Object(E.jsxs)("header",{className:"navbar navbar-dark sticky-top ".concat(i," flex-md-nowrap p-0"),style:s,children:[Object(E.jsx)(c.b,{className:"navbar-brand col-md-3 col-lg-3 me-0 px-3",to:"/",children:""!==a&&"loading"!==a&&Object(E.jsx)("img",{alt:"",src:a,style:{height:"28px",paddingLeft:"10px"}})}),!t&&""===n&&Object(E.jsx)(A,{}),""!==n&&Object(E.jsx)(L,{username:n})]})}var F=n(15),U=n(28),W=Object(b.b)({name:"app",initialState:{view:"app",files:[],filesState:"unknown",showSideBar:!0,storageType:"media",showShareDialog:!1},reducers:{setView:function(e,t){e.view=t.payload},setFilesState:function(e,t){e.filesState=t.payload},setFiles:function(e,t){e.files=t.payload},setShowSideBar:function(e,t){e.showSideBar=t.payload},toggleShowSideBar:function(e){e.showSideBar=!e.showSideBar},setStorageType:function(e,t){e.storageType=t.payload},setShowShareDialog:function(e,t){e.showShareDialog=t.payload}}}),I=W.reducer,M=W.actions,H=M.setView,z=M.setFilesState,B=M.setFiles,V=M.setShowSideBar,K=(M.toggleShowSideBar,M.setStorageType),J=M.setShowShareDialog,q=function(e){return e.app.view},Y=function(e){return e.app.filesState},G=function(e){return e.app.files},Q=function(e){return e.app.showSideBar},Z=function(e){return e.app.storageType},X=function(e){return e.app.showShareDialog},$=function(e,t,n){return function(){var a=Object(u.a)(d.a.mark((function a(o){var s;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,s={site_id:e,session_id:t,filename:n},"/api/v1/nb-delete-file",a.next=5,i.a.post("/api/v1/nb-delete-file",s);case 5:a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.error("Problem with file upload. ".concat(a.t0));case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()};function ee(e){return"select"===e.input}function te(e){return"checkbox"===e.input}function ne(e){return"numeric"===e.input}function ae(e){return"slider"===e.input}function oe(e){return"range"===e.input}function ie(e){return"file"===e.input}function se(e){return"text"===e.input}function re(e){return"dir"===e.output}function ce(e){return"markdown"===e.output}function le(e){return"button"===e.input}function de(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var ue;!function(e){e.Unknown="Unknown",e.Loaded="Loaded",e.NotFound="Not found",e.AccessForbidden="Access forbidden",e.NetworkError="Network Error",e.PleaseRefresh="Please refresh",e.LostConnection="Lost connection",e.NotReady="Not Ready",e.NotebookNotFound="Notebook not found"}(ue||(ue={}));var be={site:{},siteStatus:ue.Unknown},pe=Object(b.b)({name:"sites",initialState:be,reducers:{setSite:function(e,t){e.site=t.payload},setSiteStatus:function(e,t){e.siteStatus=t.payload}}}),je=pe.reducer,he=pe.actions,ve=he.setSite,fe=he.setSiteStatus,me=function(e){return e.sites.siteStatus},xe=function(e){return e.sites.site.id},Oe=function(e){return e.sites.site.welcome},ge=function(e){return"PUBLIC"===e.sites.site.share},ye=function(e){if(void 0===e.sites.site.info||""===e.sites.site.info)return"";var t=JSON.parse(e.sites.site.info);return void 0===(null===t||void 0===t?void 0:t.logoFilename)?"":null===t||void 0===t?void 0:t.logoFilename},we=function(e){if(void 0===e.sites.site.info||""===e.sites.site.info)return"";var t=JSON.parse(e.sites.site.info);return void 0===(null===t||void 0===t?void 0:t.navbarColor)?"":null===t||void 0===t?void 0:t.navbarColor},ke=function(e){if(void 0===e.sites.site.info||""===e.sites.site.info)return"";var t=JSON.parse(e.sites.site.info);return void 0===(null===t||void 0===t?void 0:t.footerText)?"":null===t||void 0===t?void 0:t.footerText},Ne=function(){return function(){var e=Object(u.a)(d.a.mark((function e(t){var n,a,o,s,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(ve({})),t(fe(ue.Unknown)),n="single-site",Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_LOCAL_URL:"/static"}).REACT_APP_SERVER_URL&&(n=window.location.host.split(":")[0]),window.location.origin.endsWith("hf.space")&&(n="localhost"),a="/api/v1/get-site/".concat(n,"/"),e.next=9,i.a.get(a);case 9:o=e.sent,s=o.data,t(ve(s)),"Ready"!==(null===s||void 0===s?void 0:s.status)?t(fe(ue.NotReady)):t(fe(ue.Loaded)),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),r=e.t0,console.log(r.message),"Network Error"===(null===r||void 0===r?void 0:r.message)?t(fe(ue.NetworkError)):403===r.response.status?t(fe(ue.AccessForbidden)):404===r.response.status?t(fe(ue.NotFound)):401===r.response.status?(t(N("")),t(S("")),t(fe(ue.PleaseRefresh))):console.error("Problem during loading site information. ".concat(e.t0));case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}()},Se={notebooks:[],loadingState:"loading",selectedNotebook:{},selectedNotebookId:void 0,loadingStateSelected:"loading",watchModeCounter:0,slidesHash:"",widgets:{},widgetsUrlValues:{},nbIframes:{},widgetsInitialized:!1,urlValuesUsed:!1},_e=Object(b.b)({name:"notebooks",initialState:Se,reducers:{setWidgetValue:function(e,t){var n=t.payload,a=n.key,o=n.value;e.widgets[a]=o},setWidgetUrlValue:function(e,t){var n=t.payload,a=n.key,o=n.value;e.widgetsUrlValues[a]=o},clearWidgets:function(e){e.widgets={}},clearWidgetsUrlValues:function(e){e.widgetsUrlValues={}},setNotebooks:function(e,t){e.notebooks=t.payload},setLoadingState:function(e,t){e.loadingState=t.payload},setSelectedNotebook:function(e,t){t.payload.state.startsWith("WATCH")&&e.selectedNotebook.file_updated_at===t.payload.file_updated_at||(e.selectedNotebook=t.payload,e.selectedNotebookId=e.selectedNotebook.id),t.payload.state.startsWith("WATCH")&&(e.watchModeCounter+=1)},setLoadingStateSelected:function(e,t){e.loadingStateSelected=t.payload},setSlidesHash:function(e,t){e.slidesHash=t.payload},updateWidgetsParams:function(e,t){for(var n=t.payload.widgetKey,a=!1,o=!0,i=0,s=Object.keys(e.selectedNotebook.params.params);i<s.length;i++){var r=s[i];if(r===n){o=!1;var c=Object(F.a)({},e.selectedNotebook.params.params[n]);oe(c)?(c.disabled!==t.payload.disabled&&(c.disabled=t.payload.disabled,e.widgets[r]=t.payload.value,a=!0),c.hidden!==t.payload.hidden&&(c.hidden=t.payload.hidden,e.widgets[r]=t.payload.value,a=!0),c.min!==t.payload.min&&(c.min=t.payload.min,e.widgets[r]=t.payload.value,a=!0),c.max!==t.payload.max&&(c.max=t.payload.max,e.widgets[r]=t.payload.value,a=!0),c.step!==t.payload.step&&(c.step=t.payload.step,e.widgets[r]=t.payload.value,a=!0),c.label!==t.payload.label&&(c.label=t.payload.label,a=!0)):se(c)?(c.disabled!==t.payload.disabled&&(c.disabled=t.payload.disabled,e.widgets[r]=t.payload.value,a=!0),c.hidden!==t.payload.hidden&&(c.hidden=t.payload.hidden,e.widgets[r]=t.payload.value,a=!0),c.rows!==t.payload.rows&&(c.rows=t.payload.rows,a=!0),c.label!==t.payload.label&&(c.label=t.payload.label,a=!0)):ae(c)?(c.disabled!==t.payload.disabled&&(c.disabled=t.payload.disabled,e.widgets[r]=t.payload.value,a=!0),c.hidden!==t.payload.hidden&&(c.hidden=t.payload.hidden,e.widgets[r]=t.payload.value,a=!0),c.min!==t.payload.min&&(c.min=t.payload.min,e.widgets[r]=t.payload.value,a=!0),c.max!==t.payload.max&&(c.max=t.payload.max,e.widgets[r]=t.payload.value,a=!0),c.step!==t.payload.step&&(c.step=t.payload.step,e.widgets[r]=t.payload.value,a=!0),c.label!==t.payload.label&&(c.label=t.payload.label,a=!0)):ee(c)?(c.disabled!==t.payload.disabled&&(c.disabled=t.payload.disabled,e.widgets[r]=t.payload.value,a=!0),c.hidden!==t.payload.hidden&&(c.hidden=t.payload.hidden,e.widgets[r]=t.payload.value,a=!0),c.choices.toString()!==t.payload.choices.toString()&&(c.choices=t.payload.choices,e.widgets[r]=t.payload.value,a=!0),c.label!==t.payload.label&&(c.label=t.payload.label,a=!0)):te(c)?(c.disabled!==t.payload.disabled&&(c.disabled=t.payload.disabled,e.widgets[r]=t.payload.value,a=!0),c.hidden!==t.payload.hidden&&(c.hidden=t.payload.hidden,e.widgets[r]=t.payload.value,a=!0),c.label!==t.payload.label&&(c.label=t.payload.label,a=!0)):ne(c)?(c.disabled!==t.payload.disabled&&(c.disabled=t.payload.disabled,e.widgets[r]=t.payload.value,a=!0),c.hidden!==t.payload.hidden&&(c.hidden=t.payload.hidden,e.widgets[r]=t.payload.value,a=!0),c.min!==t.payload.min&&(c.min=t.payload.min,e.widgets[r]=t.payload.value,a=!0),c.max!==t.payload.max&&(c.max=t.payload.max,e.widgets[r]=t.payload.value,a=!0),c.step!==t.payload.step&&(c.step=t.payload.step,e.widgets[r]=t.payload.value,a=!0),c.label!==t.payload.label&&(c.label=t.payload.label,a=!0)):ce(c)?c.value!==t.payload.value&&(c.value=t.payload.value,a=!0):le(c)?(e.widgets[r]=t.payload.value,c.disabled!==t.payload.disabled&&(c.disabled=t.payload.disabled,e.widgets[r]=t.payload.value,a=!0),c.hidden!==t.payload.hidden&&(c.hidden=t.payload.hidden,e.widgets[r]=t.payload.value,a=!0),c.label!==t.payload.label&&(c.label=t.payload.label,a=!0),c.style!==t.payload.style&&(c.style=t.payload.style,a=!0)):ie(c)&&(e.widgets[r]=t.payload.value,c.disabled!==t.payload.disabled&&(c.disabled=t.payload.disabled,e.widgets[r]=t.payload.value,a=!0),c.hidden!==t.payload.hidden&&(c.hidden=t.payload.hidden,e.widgets[r]=t.payload.value,a=!0),c.label!==t.payload.label&&(c.label=t.payload.label,a=!0)),a&&(e.selectedNotebook.params.params[n]=c)}}o&&(e.selectedNotebook.params.params[n]=t.payload)},hideWidgets:function(e,t){var n,a=t.payload.keys,o=Object(U.a)(a);try{for(o.s();!(n=o.n()).done;){var i=n.value;i in e.selectedNotebook.params.params&&delete e.selectedNotebook.params.params[i]}}catch(s){o.e(s)}finally{o.f()}},initWidgets:function(e,t){var n=t.payload.widgets;e.selectedNotebook.params.params={},e.widgets={};var a,o=Object(U.a)(n);try{for(o.s();!(a=o.n()).done;){var i=a.value;e.selectedNotebook.params.params[i.widgetKey]=i,e.widgets[i.widgetKey]=i.value}}catch(s){o.e(s)}finally{o.f()}},updateTitle:function(e,t){e.selectedNotebook.title=t.payload},updateShowCode:function(e,t){e.selectedNotebook.params["show-code"]=t.payload},setNbIframes:function(e,t){e.nbIframes=t.payload},setWidgetsInitialized:function(e,t){e.widgetsInitialized=t.payload},setUrlValuesUsed:function(e,t){e.urlValuesUsed=t.payload}}}),Te=_e.reducer,Pe=_e.actions,Ce=Pe.setNotebooks,Re=Pe.setLoadingState,Ee=Pe.setSelectedNotebook,Ae=Pe.setLoadingStateSelected,Le=Pe.setSlidesHash,De=Pe.updateWidgetsParams,Fe=Pe.hideWidgets,Ue=Pe.setWidgetValue,We=Pe.setWidgetUrlValue,Ie=(Pe.clearWidgets,Pe.clearWidgetsUrlValues),Me=Pe.initWidgets,He=Pe.updateTitle,ze=Pe.updateShowCode,Be=(Pe.setNbIframes,Pe.setWidgetsInitialized),Ve=Pe.setUrlValuesUsed,Ke=function(e){return e.notebooks.notebooks},Je=function(e){return e.notebooks.loadingState},qe=function(e){return e.notebooks.selectedNotebook},Ye=function(e){return e.notebooks.selectedNotebookId},Ge=function(e){var t,n,a=null===(t=e.notebooks.selectedNotebook)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.static_notebook;return void 0!==a&&a},Qe=function(e){return e.notebooks.loadingStateSelected},Ze=function(e){return e.notebooks.slidesHash},Xe=function(e){return e.notebooks.widgets},$e=function(e){return e.notebooks.widgetsUrlValues},et=function(e){return e.notebooks.widgetsInitialized},tt=function(e){return e.notebooks.urlValuesUsed},nt=function(e){return function(){var t=Object(u.a)(d.a.mark((function t(n){var a,o,s,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(Le("")),n(Re("loading")),n(ut()),a="/api/v1/".concat(e,"/notebooks/"),t.next=7,i.a.get(a);case 7:o=t.sent,s=o.data,r=s.map((function(e){var t=JSON.parse(e.params);return Object(F.a)(Object(F.a)({},e),{},{params:t})})),n(Ce(r)),n(Re("loaded")),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),n(Re("error")),console.error("Problem during loading recent notebooks. ".concat(t.t0));case 18:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()},at=Object(b.b)({name:"tasks",initialState:{currentTask:{},historicTask:{},showCurrent:!0,previousTask:{},exportingToPDF:!1,exportToPDFJobId:"",exportToPDFCounter:0,executionHistory:[]},reducers:{setShowCurrent:function(e,t){e.showCurrent=t.payload},setCurrentTask:function(e,t){e.currentTask=t.payload},setHistoricTask:function(e,t){e.historicTask=t.payload},setPreviousTask:function(e,t){e.previousTask=t.payload},copyCurrentToPreviousTask:function(e){e.previousTask=e.currentTask},setExportingToPDF:function(e,t){e.exportingToPDF=t.payload},setExportToPDFJobId:function(e,t){e.exportToPDFJobId=t.payload},resetExportToPDFCounter:function(e){e.exportToPDFCounter=0},increaseExportToPDFCounter:function(e){e.exportToPDFCounter+=1},stopPDFExport:function(e){e.exportingToPDF=!1,e.exportToPDFJobId="",e.exportToPDFCounter=0},setExecutionHistory:function(e,t){e.executionHistory=t.payload},clearExecutionHistory:function(e){e.executionHistory=[]}}}),ot=at.reducer,it=at.actions,st=(it.setShowCurrent,it.setCurrentTask,it.setHistoricTask,it.setPreviousTask,it.copyCurrentToPreviousTask,it.setExportingToPDF),rt=it.setExportToPDFJobId,ct=it.resetExportToPDFCounter,lt=it.increaseExportToPDFCounter,dt=it.stopPDFExport,ut=(it.setExecutionHistory,it.clearExecutionHistory),bt=function(e){return e.tasks.currentTask},pt=function(e){return e.tasks.historicTask},jt=function(e){return e.tasks.previousTask},ht=function(e){return e.tasks.exportingToPDF},vt=function(e){return e.tasks.exportToPDFJobId},ft=function(e){return e.tasks.exportToPDFCounter},mt=function(){try{var e,t,n=document.getElementById("main-iframe"),a=null===n||void 0===n||null===(e=n.contentWindow)||void 0===e||null===(t=e.location)||void 0===t?void 0:t.hash;if(a)return a}catch(o){}return""};function xt(e){var t=e.widgetKey,n=e.label,o=e.value,i=e.disabled,r=e.hidden,l=e.runNb,d=e.url_key,u=Object(s.b)(),b=Object(a.useState)(!1),p=Object(R.a)(b,2),j=p[0],h=p[1],v=Object(c.c)(),f=Object(R.a)(v,1)[0];return Object(a.useEffect)((function(){if(void 0!==d&&""!==d){var e,n=null===(e=f.get(d))||void 0===e?void 0:e.toLowerCase();j||void 0===n||"true"!==n&&"false"!==n||(u(We({key:t,value:"true"===n})),u(Ve(!0)))}}),[u,f,j,d,t]),Object(a.useEffect)((function(){j&&l()}),[o]),Object(E.jsxs)("div",{className:"form-group form-check form-switch mb-3",style:{display:r?"none":""},children:[Object(E.jsx)("input",{className:"form-check-input",type:"checkbox",id:"checkbox-".concat(n),disabled:i,onChange:function(){h(!0),u(Ue({key:t,value:!o}))},checked:null!=o&&o}),Object(E.jsx)("label",{className:"form-check-label",htmlFor:"checkbox-".concat(n),style:{color:i?"#555":"#212529"},children:n})]})}function Ot(e){var t=e.widgetKey,n=e.label,o=e.value,i=e.min,r=e.max,l=e.step,d=e.disabled,u=e.hidden,b=e.runNb,p=e.continuousUpdate,j=e.url_key,h=Object(s.b)(),v=Object(a.useState)(!1),f=Object(R.a)(v,2),m=f[0],x=f[1],O=Object(a.useState)(!1),g=Object(R.a)(O,2),y=g[0],w=g[1],k=0,N=10,S=1;null!==i&&(k=i),null!==r&&(N=r),null!==l&&(S=l);var _=null!==o&&void 0!==o?o:0,T=Object(c.c)(),P=Object(R.a)(T,1)[0];Object(a.useEffect)((function(){if(void 0!==j&&""!==j){var e=P.get(j);!y&&void 0!==e&&null!==e&&!isNaN(parseFloat(e))&&parseFloat(e)>=k&&parseFloat(e)<=N&&(h(We({key:t,value:parseFloat(e)})),h(Ve(!0)))}}),[h,N,k,P,y,j,t]);var C=function(){null!==i&&null!==o&&o<i&&h(Ue({key:t,value:i})),null!==r&&null!==o&&o>r&&h(Ue({key:t,value:r}))};return Object(E.jsxs)("div",{className:"form-group mb-3",style:{display:u?"none":""},children:[Object(E.jsx)("label",{htmlFor:"checkbox-".concat(n),style:{color:d?"#555":"#212529"},children:n}),Object(E.jsx)("input",{className:"form-control",type:"number",value:_,onChange:function(e){w(!0),x(!0),h(Ue({key:t,value:e.target.value}))},onBlur:function(e){C()},onKeyPress:function(e){"Enter"===e.key&&(C(),b(),x(!1),e.preventDefault())},min:k,max:N,step:S,disabled:d}),m&&p&&Object(E.jsx)("div",{style:{float:"right",position:"relative",top:"0px",left:"0px"},children:Object(E.jsx)("button",{className:"btn btn-sm btn-outline-primary",onClick:function(e){C(),b(),x(!1),e.preventDefault()},style:{fontSize:"0.7em",border:"none"},children:"Press enter or click to apply"})})]})}var gt=n(58);function yt(e){var t=e.widgetKey,n=e.label,o=e.value,i=e.min,r=e.max,l=e.step,d=(e.vertical,e.disabled),u=e.hidden,b=e.runNb,p=e.url_key,j=0,h=100,v=1;i&&(j=i),r&&(h=r),l&&(v=l);var f=Object(s.b)(),m=Object(a.useState)(!1),x=Object(R.a)(m,2),O=x[0],g=x[1],y=Object(c.c)(),w=Object(R.a)(y,1)[0];Object(a.useEffect)((function(){if(void 0!==p&&""!==p){var e,n=null===(e=w.get(p))||void 0===e?void 0:e.split(",").map((function(e){return parseFloat(e)}));!O&&void 0!==n&&2===n.length&&void 0!==n[0]&&!isNaN(n[0])&&void 0!==n[1]&&!isNaN(n[1])&&n[0]<=n[1]&&n[0]>=j&&n[1]<=h&&(f(We({key:t,value:n})),f(Ve(!0)))}}),[f,h,j,w,O,p,t]);var k=null!=o&&void 0!==o&&2===o.length?o:[j,h];return Object(E.jsxs)("div",{className:"form-group mb-3",style:{display:u?"none":""},children:[Object(E.jsx)("label",{htmlFor:"range-slider-".concat(n),style:{color:d?"#555":"#212529"},children:n}),Object(E.jsx)("div",{style:{paddingTop:"12px",display:"flex",justifyContent:"center",flexWrap:"wrap"},children:Object(E.jsx)(gt.Range,{disabled:d,values:k,step:v,min:j,max:h,onChange:function(e){g(!0),f(Ie()),f(Ue({key:t,value:e}))},onFinalChange:function(e){b()},renderTrack:function(e){var t=e.props,n=e.children;return Object(E.jsx)("div",{onMouseDown:t.onMouseDown,onTouchStart:t.onTouchStart,style:Object(F.a)(Object(F.a)({},t.style),{},{height:"36px",display:"flex",width:"100%"}),children:Object(E.jsxs)("div",{ref:t.ref,style:{height:"5px",width:"100%",borderRadius:"4px",background:Object(gt.getTrackBackground)({values:k,colors:["#ccc",d?"rgba(0, 0, 0, 0.3)":"#2684ff","#ccc"],min:j,max:h}),alignSelf:"center"},children:[n,Object(E.jsxs)("div",{style:{display:"inline-block",width:"100%",fontSize:"12px",paddingTop:"13px"},children:[Object(E.jsx)("div",{style:{float:"left"},children:j}),Object(E.jsx)("div",{style:{float:"right"},children:h})]})]})})},renderThumb:function(e){var t=e.index,n=e.props,a=e.isDragged;return Object(E.jsxs)("div",Object(F.a)(Object(F.a)({},n),{},{style:Object(F.a)(Object(F.a)({},n.style),{},{height:"18px",width:"18px",border:"None !important",borderRadius:"4px",backgroundColor:"#FFF",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0px 2px 6px #AAA",outline:"none"}),children:[Object(E.jsx)("div",{style:{position:"absolute",top:"-24px",color:"#fff",fontWeight:"bold",fontSize:"12px",fontFamily:"Arial,Helvetica Neue,Helvetica,sans-serif",padding:"2px",borderRadius:"3px",backgroundColor:d?"rgba(0, 0, 0, 0.3)":"#2684ff"},children:k[t]}),Object(E.jsx)("div",{style:{height:"12px",width:"3px",backgroundColor:a?"#2684ff":"#CCC"}})]}))}})})]})}var wt=n(172);function kt(e){var t=e.widgetKey,n=e.label,o=e.value,i=e.choices,r=e.multi,l=e.disabled,d=e.hidden,u=e.runNb,b=e.url_key,p=Object(s.b)(),j=Object(a.useState)(!1),h=Object(R.a)(j,2),v=h[0],f=h[1],m={menu:function(e){return Object(F.a)(Object(F.a)({},e),{},{zIndex:100})}},x=Object(c.c)(),O=Object(R.a)(x,1)[0];Object(a.useEffect)((function(){if(void 0!==b&&""!==b){var e=O.get(b);if(!v&&void 0!==e&&null!==e)if(r){var n=e.split(",");n&&(p(We({key:t,value:n.filter((function(e){return i.includes(e)}))})),p(Ve(!0)))}else i.includes(e)&&(p(We({key:t,value:e})),p(Ve(!0)))}}),[i,p,r,O,v,b,t]);var g={value:"",label:""},y=[{value:"",label:""}],w=i.map((function(e){return o&&e===o&&!r&&(g={value:e,label:e}),{value:e,label:e}}));return r&&(y=[],i.map((function(e){return o&&o.includes(e)&&r&&y.push({value:e,label:e}),{value:e,label:e}}))),Object(a.useEffect)((function(){v&&u()}),[o]),Object(E.jsxs)("div",{className:"form-group mb-3",style:{display:d?"none":""},children:[Object(E.jsx)("label",{htmlFor:"select-".concat(n),style:{color:l?"#555":"#212529"},children:n}),Object(E.jsx)(wt.a,{id:"select-".concat(n),isDisabled:l,name:n||"Select",styles:m,value:r?y:g,options:w,isMulti:r,onChange:function(e){if(e)if(f(!0),function(e){return void 0!==e.value}(e))p(Ue({key:t,value:e.value}));else{var n=Array.from(e.values()).filter((function(e){return void 0!==e}));p(Ue({key:t,value:n.map((function(e){return e.value}))}))}}})]})}function Nt(e){var t=e.widgetKey,n=e.label,o=e.value,i=e.min,r=e.max,l=e.step,d=(e.vertical,e.disabled),u=e.hidden,b=e.runNb,p=e.url_key,j=Object(s.b)(),h=Object(a.useState)(!1),v=Object(R.a)(h,2),f=v[0],m=v[1],x=0,O=100,g=1;i&&(x=i),r&&(O=r),l&&(g=l);var y=Object(c.c)(),w=Object(R.a)(y,1)[0];Object(a.useEffect)((function(){if(void 0!==p&&""!==p){var e=w.get(p);!f&&void 0!==e&&null!==e&&!isNaN(parseFloat(e))&&parseFloat(e)>=x&&parseFloat(e)<=O&&(j(We({key:t,value:parseFloat(e)})),j(Ve(!0)))}}),[j,O,x,w,f,p,t]);var k=[null!==o?o:O];return Object(E.jsxs)("div",{className:"form-group mb-3",style:{display:u?"none":""},children:[Object(E.jsx)("label",{htmlFor:"slider-".concat(n),style:{color:d?"#555":"#212529"},children:n}),Object(E.jsx)("div",{style:{paddingTop:"12px",display:"flex",justifyContent:"center",flexWrap:"wrap"},children:Object(E.jsx)(gt.Range,{disabled:d,values:k,step:g,min:x,max:O,onChange:function(e){m(!0),j(Ue({key:t,value:e[0]}))},onFinalChange:function(e){b()},renderTrack:function(e){var t=e.props,n=e.children;return Object(E.jsx)("div",{onMouseDown:t.onMouseDown,onTouchStart:t.onTouchStart,style:Object(F.a)(Object(F.a)({},t.style),{},{height:"36px",display:"flex",width:"100%"}),children:Object(E.jsxs)("div",{ref:t.ref,style:{height:"5px",width:"100%",borderRadius:"4px",background:Object(gt.getTrackBackground)({values:k,colors:[d?"rgba(0, 0, 0, 0.3)":"#2684ff","#ccc"],min:x,max:O}),alignSelf:"center"},children:[n,Object(E.jsxs)("div",{style:{display:"inline-block",width:"100%",fontSize:"12px",paddingTop:"13px"},children:[Object(E.jsx)("div",{style:{float:"left"},children:x}),Object(E.jsx)("div",{style:{float:"right"},children:O})]})]})})},renderThumb:function(e){var t=e.props,n=e.isDragged;return Object(E.jsxs)("div",Object(F.a)(Object(F.a)({},t),{},{style:Object(F.a)(Object(F.a)({},t.style),{},{height:"18px",width:"18px",border:"None",borderRadius:"4px",backgroundColor:"#FFF",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0px 2px 6px #AAA",outline:"none"}),children:[Object(E.jsx)("div",{style:{position:"absolute",top:"-24px",color:"#fff",fontWeight:"bold",fontSize:"12px",fontFamily:"Arial,Helvetica Neue,Helvetica,sans-serif",padding:"2px",borderRadius:"3px",backgroundColor:d?"rgba(0, 0, 0, 0.3)":"#2684ff"},children:k[0]}),Object(E.jsx)("div",{style:{height:"12px",width:"3px",backgroundColor:n?"#2684ff":"#CCC"}})]}))}})})]})}var St=n(101),_t=n(127),Tt=n.n(_t),Pt=n(128),Ct=n.n(Pt),Rt=n(129),Et=n.n(Rt);function At(e){var t=e.widgetKey,n=e.label,o=e.maxFileSize,r=e.disabled,c=e.hidden,l=e.value,b=e.runNb,j=Object(s.b)(),h=Object(a.useState)(!1),v=Object(R.a)(h,2),m=v[0],x=v[1],O=Object(s.c)(Z),g=Object(s.c)(xe),y=Object(s.c)(f),w="100MB";o&&(w=o),Object(a.useEffect)((function(){m&&void 0!==l&&2===l.length&&b()}),[l]),Object(a.useEffect)((function(){j(function(){var e=Object(u.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,i.a.get("/api/v1/storage-type");case 4:n=e.sent,a=n.data,t(K(a.storage_type)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Get storage type error. ".concat(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}),[j]);var k={url:"".concat(i.a.defaults.baseURL,"/api/v1/fp"),process:"/process/",revert:function(){var e=Object(u.a)(d.a.mark((function e(n,a,o){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.delete("".concat(i.a.defaults.baseURL,"/api/v1/fp/revert"),{data:n});case 3:j(Ue({key:t,value:[]})),a(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o("Problem with uploaded file removal");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,a){return e.apply(this,arguments)}}()},N={process:function(e,t,n,a,o,s,r){var c=new AbortController;return i.a.get("/api/v1/nb-file-put/".concat(g,"/").concat(y,"/").concat(t.name,"/").concat(t.size)).then((function(e){var n=e.data.url,o=i.a.defaults.headers.common.Authorization;delete i.a.defaults.headers.common.Authorization;var r={onUploadProgress:function(e){s(void 0!==e.total,e.loaded,e.total)}};i.a.put(n,t,{headers:{"Content-Type":""},onUploadProgress:r.onUploadProgress,signal:c.signal}).then((function(e){a(t.name),void 0!==g&&j(function(e,t,n){return function(){var a=Object(u.a)(d.a.mark((function a(o){var s;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,s={site_id:e,session_id:t,filename:n},a.next=5,i.a.post("/api/v1/nb-file-uploaded",s);case 5:a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.error("Problem with file upload. ".concat(a.t0));case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}(g,y,t.name))})).catch((function(e){p.b.error("Error when uploading new files")})),i.a.defaults.headers.common.Authorization=o})).catch((function(e){p.b.error("Cant upload new files")})),{abort:function(){c.abort(),r()}}},revert:function(){var e=Object(u.a)(d.a.mark((function e(t,n,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{void 0!==g&&j($(g,y,t)),n()}catch(o){a("Problem with uploaded file removal")}case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()};return Object(E.jsxs)("div",{className:"form-group mb-3",style:{display:c?"none":""},children:[Object(E.jsx)("label",{htmlFor:"file-".concat(n),style:{color:r?"#555":"#212529"},children:n}),Object(E.jsx)("div",{children:Object(E.jsx)(St.FilePond,{disabled:r,maxFileSize:w,onprocessfile:function(e,n){x(!0),j(Ue({key:t,value:[n.filename,n.serverId]}))},server:"media"===O?k:N,labelIdle:'Drag & Drop your file or <span class="filepond--label-action">Browse</span>'})})]})}function Lt(e){var t=e.widgetKey,n=e.label,o=e.value,i=e.rows,r=e.disabled,l=e.hidden,d=e.runNb,u=e.continuousUpdate,b=e.url_key,p=e.sanitize,j=Object(s.b)(),h=Object(a.useState)(!1),v=Object(R.a)(h,2),f=v[0],m=v[1],x=Object(a.useState)(!1),O=Object(R.a)(x,2),g=O[0],y=O[1],w=i||1,k=function(e){return e.replace(/["'(){}[\]`^]/gim,"")},N=Object(c.c)(),S=Object(R.a)(N,1)[0];return Object(a.useEffect)((function(){if(void 0!==b&&""!==b){var e=S.get(b);g||void 0===e||null===e||(j(We({key:t,value:e})),j(Ve(!0)))}}),[j,S,g,b,t]),Object(E.jsxs)("div",{className:"form-group mb-3",style:{display:l?"none":""},children:[Object(E.jsx)("label",{htmlFor:"textarea-".concat(n),style:{color:r?"#555":"#212529"},children:n}),1===w&&Object(E.jsx)("input",{className:"form-control",type:"text",id:"text-".concat(n),value:o||"",onChange:function(e){y(!0),m(!0),j(Ue({key:t,value:p?k(e.target.value):e.target.value}))},onKeyPress:function(e){"Enter"===e.key&&(d(),m(!1),e.preventDefault())},disabled:r}),w>1&&Object(E.jsx)("textarea",{className:"form-control",id:"text-area-".concat(n),rows:w,value:o||"",onChange:function(e){y(!0),m(!0),j(Ue({key:t,value:p?k(e.target.value):e.target.value}))},disabled:r}),f&&u&&1===w&&Object(E.jsx)("div",{style:{float:"right",position:"relative",top:"2px",left:"0px"},children:Object(E.jsx)("button",{className:"btn btn-sm btn-outline-primary",onClick:function(e){d(),m(!1),e.preventDefault()},style:{fontSize:"0.7em",border:"none"},children:"Press enter or click to apply"})}),f&&u&&w>1&&Object(E.jsx)("div",{style:{float:"right",position:"relative",top:"2px",left:"0px"},children:Object(E.jsx)("button",{className:"btn btn-sm btn-outline-primary",onClick:function(e){d(),m(!1),e.preventDefault()},style:{fontSize:"0.7em",border:"none"},children:"Apply"})})]})}Object(St.registerPlugin)(Tt.a,Ct.a,Et.a);var Dt,Ft,Ut=n(312),Wt=n(314),It=n(87),Mt=n(90),Ht=n(88);function zt(e){var t=e.value,n=e.disabled;return Object(E.jsx)("div",{className:"form-group mb-3",style:{color:n?"#555":"#212529"},children:Object(E.jsx)(Ut.a,{rehypePlugins:[It.a,Wt.a,Mt.a,Ht.a],children:t})})}!function(e){e.Connecting="Connecting",e.Connected="Connected",e.Unknown="Unknown",e.Disconnected="Disconnected"}(Dt||(Dt={})),function(e){e.Unknown="Unknown",e.Starting="Starting",e.Running="Running",e.Missing="Missing",e.Busy="Busy",e.Queued="Queued",e.MaxRunTimeReached="MaxRunTimeReached",e.MaxIdleTimeReached="MaxIdleTimeReached",e.UsageLimitReached="UsageLimitReached"}(Ft||(Ft={}));var Bt={webSocketState:Dt.Unknown,workerState:Ft.Unknown,workerId:void 0,notebookSrc:"",tryConnectCount:0},Vt=Object(b.b)({name:"ws",initialState:Bt,reducers:{setWebSocketState:function(e,t){e.webSocketState=t.payload},setWorkerState:function(e,t){e.workerState=t.payload},setWorkerId:function(e,t){e.workerId=t.payload},setNotebookSrc:function(e,t){e.notebookSrc=t.payload},increaseTryConnectCount:function(e){e.tryConnectCount+=1},resetTryConnectCount:function(e){e.tryConnectCount=0}}}),Kt=Vt.reducer,Jt=Vt.actions,qt=Jt.setWebSocketState,Yt=Jt.setWorkerState,Gt=Jt.setWorkerId,Qt=Jt.setNotebookSrc,Zt=Jt.increaseTryConnectCount,Xt=Jt.resetTryConnectCount,$t=function(e){return e.ws.webSocketState},en=function(e){return e.ws.workerState},tn=function(e){return e.ws.workerId},nn=function(e){return e.ws.notebookSrc},an=function(e){return e.ws.tryConnectCount},on=function(e){return{purpose:"run-notebook",widgets:e}},sn=Object(a.createContext)(void 0),rn="ws://127.0.0.1:8000",cn=!0;Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_LOCAL_URL:"/static"}).REACT_APP_SERVER_WS?(rn=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_LOCAL_URL:"/static"}).REACT_APP_SERVER_WS,cn=!1):"http://localhost:3000"===window.location.origin?(rn="ws://127.0.0.1:8000",cn=!0):(rn=window.location.origin.replace("http://","ws://").replace("https://","wss://"),cn=!1),window.location.origin.endsWith("hf.space")&&(rn=window.location.origin.replace("http://","ws://").replace("https://","wss://"),cn=!1);var ln=0,dn=void 0;function un(e){var t=e.children;console.log("WebSocketProvider");var n=Object(s.b)(),o=Object(s.c)(xe),r=Object(s.c)(Ye),c=Object(s.c)(T),l=Object(s.c)(Ge),b=void 0,p="Unknown";Object(a.useEffect)((function(){return ln=0,function(){var e;ln=6,null===(e=dn)||void 0===e||e.close()}}),[]);var j=function(e){void 0!==b&&b.readyState===b.OPEN&&b.send(e)};function h(e){n(Xt()),j(JSON.stringify({purpose:"server-address",address:rn})),n(qt(Dt.Connected)),g()}function v(e){var t,a=JSON.parse(e.data);"purpose"in a&&("worker-state"===a.purpose?(console.log("worker-state",a.state),p=a.state,n(Yt(a.state)),n(Gt(a.workerId)),(p===Ft.MaxIdleTimeReached||p===Ft.MaxRunTimeReached)&&(null===(t=b)||void 0===t||t.close())):"executed-notebook"===a.purpose?((null===a||void 0===a?void 0:a.reloadNotebook)&&void 0!==r&&n(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var a=Object(u.a)(d.a.mark((function a(o){var s,r,c,l,u,b;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n||(o(Le("")),o(ut())),s=de(),r=s.width,o(V(r>992)),n||o(Ae("loading")),c="/api/v1/".concat(e,"/notebooks/").concat(t,"/"),a.next=8,i.a.get(c);case 8:l=a.sent,u=l.data,b=JSON.parse(u.params),o(Ee(Object(F.a)(Object(F.a)({},u),{},{params:b}))),n||o(Ae("loaded")),null!==(null===b||void 0===b?void 0:b.show_sidebar)&&void 0!==(null===b||void 0===b?void 0:b.show_sidebar)&&o(V(null===b||void 0===b?void 0:b.show_sidebar)),a.next=20;break;case 16:a.prev=16,a.t0=a.catch(0),n||o(Ae("error")),console.error("Problem during loading selected notebook (".concat(t,"). ").concat(a.t0));case 20:case"end":return a.stop()}}),a,null,[[0,16]])})));return function(e){return a.apply(this,arguments)}}()}(o,r)),n(Qt(a.body))):"update-widgets"===a.purpose?n(De(a)):"hide-widgets"===a.purpose?n(Fe(a)):"init-widgets"===a.purpose?(n(Me(a)),n(Be(!0))):"update-title"===a.purpose?n(He(a.title)):"update-show-code"===a.purpose?n(ze(a.showCode)):"download-html"!==a.purpose&&"download-pdf"!==a.purpose||a.url&&a.filename&&(n(st(!1)),x(a.url,a.filename)))}function m(e){n(qt(Dt.Disconnected)),n(Yt(Ft.Unknown))}function O(e){n(qt(Dt.Disconnected)),b=void 0,p!==Ft.MaxIdleTimeReached&&p!==Ft.MaxRunTimeReached&&(n(Yt(Ft.Unknown)),n(Gt(void 0)),ln<5&&setTimeout((function(){return y()}),5e3))}function g(){j(JSON.stringify({purpose:"worker-ping"})),void 0!==b&&b.readyState===b.OPEN&&setTimeout((function(){return g()}),1e4)}function y(){if((cn||!l)&&void 0!==r&&void 0===b&&p!==Ft.MaxIdleTimeReached&&p!==Ft.MaxRunTimeReached&&ln<5){console.log("WS connect ..."+p+" "+ln),n(Zt());var e="".concat(rn,"/ws/client/").concat(r,"/").concat(f(),"/");void 0!==c&&null!==c&&""!==c&&(e+="?token=".concat(c)),(b=new WebSocket(e)).onopen=h,b.onmessage=v,b.onerror=m,b.onclose=O,dn=b,(ln+=1)>=5&&n(fe(ue.NetworkError))}}y();var w={sendMessage:j};return Object(E.jsx)(sn.Provider,{value:w,children:t})}function bn(e){var t=e.allowDownload,n=e.allowShare,o=e.waiting,r=(e.continuousUpdate,e.staticNotebook),c=e.notebookId,l=e.notebookPath,b=e.notebookTitle,j=e.runDownloadHTML,h=e.runDownloadPDF,v=Object(s.b)(),m=Object(s.c)($t),O=Object(s.c)(en),g=Object(s.c)(an),y=Object(s.c)(xe);Object(a.useEffect)((function(){g>=5&&v(fe(ue.LostConnection))}),[v,g]);var w="orange";m===Dt.Connected?w="green":m!==Dt.Disconnected&&m!==Dt.Unknown||(w="red");var k="orange";return O===Ft.Running||O===Ft.Busy?k="green":O!==Ft.Missing&&O!==Ft.Unknown||(k="red"),Object(E.jsxs)("div",{style:{paddingBottom:"25px"},children:[void 0!==c&&!r&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("span",{title:"WebSocket: ".concat(m),children:Object(E.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:w,className:"bi bi-wifi",viewBox:"0 0 16 16",children:[Object(E.jsx)("path",{d:"M15.384 6.115a.485.485 0 0 0-.047-.736A12.444 12.444 0 0 0 8 3C5.259 3 2.723 3.882.663 5.379a.485.485 0 0 0-.048.736.518.518 0 0 0 .668.05A11.448 11.448 0 0 1 8 4c2.507 0 4.827.802 6.716 2.164.205.148.49.13.668-.049z"}),Object(E.jsx)("path",{d:"M13.229 8.271a.482.482 0 0 0-.063-.745A9.455 9.455 0 0 0 8 6c-1.905 0-3.68.56-5.166 1.526a.48.48 0 0 0-.063.745.525.525 0 0 0 .652.065A8.46 8.46 0 0 1 8 7a8.46 8.46 0 0 1 4.576 1.336c.206.132.48.108.653-.065zm-2.183 2.183c.226-.226.185-.605-.1-.75A6.473 6.473 0 0 0 8 9c-1.06 0-2.062.254-2.946.704-.285.145-.326.524-.1.75l.015.015c.16.16.407.19.611.09A5.478 5.478 0 0 1 8 10c.868 0 1.69.201 2.42.56.203.1.45.07.61-.091l.016-.015zM9.06 12.44c.196-.196.198-.52-.04-.66A1.99 1.99 0 0 0 8 11.5a1.99 1.99 0 0 0-1.02.28c-.238.14-.236.464-.04.66l.706.706a.5.5 0 0 0 .707 0l.707-.707z"})]})})," ",Object(E.jsx)("span",{title:"Worker: ".concat(O,"\nSession Id: ").concat(f()),children:Object(E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:k,className:"bi bi-cpu",viewBox:"0 0 16 16",children:Object(E.jsx)("path",{d:"M5 0a.5.5 0 0 1 .5.5V2h1V.5a.5.5 0 0 1 1 0V2h1V.5a.5.5 0 0 1 1 0V2h1V.5a.5.5 0 0 1 1 0V2A2.5 2.5 0 0 1 14 4.5h1.5a.5.5 0 0 1 0 1H14v1h1.5a.5.5 0 0 1 0 1H14v1h1.5a.5.5 0 0 1 0 1H14v1h1.5a.5.5 0 0 1 0 1H14a2.5 2.5 0 0 1-2.5 2.5v1.5a.5.5 0 0 1-1 0V14h-1v1.5a.5.5 0 0 1-1 0V14h-1v1.5a.5.5 0 0 1-1 0V14h-1v1.5a.5.5 0 0 1-1 0V14A2.5 2.5 0 0 1 2 11.5H.5a.5.5 0 0 1 0-1H2v-1H.5a.5.5 0 0 1 0-1H2v-1H.5a.5.5 0 0 1 0-1H2v-1H.5a.5.5 0 0 1 0-1H2A2.5 2.5 0 0 1 4.5 2V.5A.5.5 0 0 1 5 0zm-.5 3A1.5 1.5 0 0 0 3 4.5v7A1.5 1.5 0 0 0 4.5 13h7a1.5 1.5 0 0 0 1.5-1.5v-7A1.5 1.5 0 0 0 11.5 3h-7zM5 6.5A1.5 1.5 0 0 1 6.5 5h3A1.5 1.5 0 0 1 11 6.5v3A1.5 1.5 0 0 1 9.5 11h-3A1.5 1.5 0 0 1 5 9.5v-3zM6.5 6a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3z"})})})]}),O===Ft.Busy&&Object(E.jsxs)("span",{title:"Worker is busy",children:[" ",Object(E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"green",className:"bi bi-activity",viewBox:"0 0 16 16",children:Object(E.jsx)("path",{fillRule:"evenodd",d:"M6 2a.5.5 0 0 1 .47.33L10 12.036l1.53-4.208A.5.5 0 0 1 12 7.5h3.5a.5.5 0 0 1 0 1h-3.15l-1.88 5.17a.5.5 0 0 1-.94 0L6 3.964 4.47 8.171A.5.5 0 0 1 4 8.5H.5a.5.5 0 0 1 0-1h3.15l1.88-5.17A.5.5 0 0 1 6 2Z"})})]}),Object(E.jsxs)("div",{style:{float:"right"},children:[t&&Object(E.jsxs)("div",{className:"dropdown mx-2 btn-group",style:{},children:[Object(E.jsxs)("button",{className:"btn btn-sm btn-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown",disabled:o,children:[Object(E.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",style:{paddingBottom:"1px"},children:[Object(E.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Object(E.jsx)("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),Object(E.jsx)("path",{d:"M7 11l5 5l5 -5"}),Object(E.jsx)("path",{d:"M12 4l0 12"})]})," ","Download"]}),Object(E.jsxs)("ul",{className:"dropdown-menu my-2",children:[Object(E.jsx)("li",{children:Object(E.jsxs)("button",{type:"button",style:{cursor:"pointer"},className:"dropdown-item",onClick:function(){r?x("".concat(i.a.defaults.baseURL).concat(l),"".concat(b,".html")):j()},children:[Object(E.jsx)("i",{className:"fa fa-file-code-o","aria-hidden":"true"})," ","Download as HTML"]})}),Object(E.jsx)("li",{children:Object(E.jsx)("hr",{className:"dropdown-divider"})}),Object(E.jsx)("li",{children:Object(E.jsxs)("button",{type:"button",className:"dropdown-item",onClick:function(){r?v(function(e,t,n){return function(){var a=Object(u.a)(d.a.mark((function a(o){var s,r,c,l;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,o(st(!0)),o(ct()),o(rt("")),s=f(),r={site_id:e,session_id:s,notebook_id:t,notebook_path:n},a.next=9,i.a.post("/api/v1/export_pdf/",r);case 9:c=a.sent,l=c.data,o(rt(l.job_id)),a.next=18;break;case 14:a.prev=14,a.t0=a.catch(0),p.b.error("The error occured during PDF export. ".concat(a.t0)),o(dt());case 18:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(e){return a.apply(this,arguments)}}()}(y,c,l)):(v(st(!0)),h())},children:[Object(E.jsx)("i",{className:"fa fa-file-pdf-o","aria-hidden":"true"})," ","Download as PDF"]})})]})]}),n&&Object(E.jsxs)("button",{className:"btn btn-sm btn-primary",onClick:function(){return v(J(!0))},disabled:o,children:[Object(E.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(E.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Object(E.jsx)("path",{d:"M6 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),Object(E.jsx)("path",{d:"M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),Object(E.jsx)("path",{d:"M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),Object(E.jsx)("path",{d:"M8.7 10.7l6.6 -3.4"}),Object(E.jsx)("path",{d:"M8.7 13.3l6.6 3.4"})]})," ","Share"]})]})]})}function pn(e){var t=e.widgetKey,n=e.label,o=e.style,i=e.value,r=e.disabled,c=e.hidden,l=e.runNb,d=Object(s.b)(),u="btn-primary";return"success"===o?u="btn-success":"danger"===o?u="btn-danger":"info"===o?u="btn-info":"warning"===o&&(u="btn-warning"),Object(a.useEffect)((function(){i&&l()}),[i]),Object(E.jsx)("div",{className:"form-group mb-3",style:{display:c?"none":""},children:Object(E.jsx)("button",{type:"button",className:"btn ".concat(u),style:{marginRight:"10px",width:"47%"},onClick:function(){d(Ue({key:t,value:!0}))},disabled:r,children:n})})}function jn(e){var t=e.runNb,n=e.waiting,a=e.workerState;return Object(E.jsxs)("button",{type:"button",className:"btn btn-success",style:{marginRight:"10px",width:"100%"},onClick:function(){t()},disabled:n||a!==Ft.Running,children:[a===Ft.Running&&Object(E.jsxs)("span",{children:[Object(E.jsx)("i",{className:"fa fa-play","aria-hidden":"true"})," Run"]}),a===Ft.Busy&&Object(E.jsxs)("span",{children:[Object(E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"white",className:"bi bi-activity",viewBox:"0 0 16 16",children:Object(E.jsx)("path",{fillRule:"evenodd",d:"M6 2a.5.5 0 0 1 .47.33L10 12.036l1.53-4.208A.5.5 0 0 1 12 7.5h3.5a.5.5 0 0 1 0 1h-3.15l-1.88 5.17a.5.5 0 0 1-.94 0L6 3.964 4.47 8.171A.5.5 0 0 1 4 8.5H.5a.5.5 0 0 1 0-1h3.15l1.88-5.17A.5.5 0 0 1 6 2Z"})})," ","Busy"]}),a!==Ft.Busy&&a!==Ft.Running&&Object(E.jsx)("span",{children:"Waiting ..."})]})}var hn=n(49);function vn(e){var t=e.notebookTitle,n=e.notebookId,o=(e.notebookSchedule,e.taskCreatedAt,e.loadingState,e.waiting),i=e.widgetsParams,r=e.watchMode,c=e.notebookPath,l=e.displayEmbed,d=e.showFiles,u=e.isPresentation,b=(e.notebookParseErrors,e.continuousUpdate),p=e.staticNotebook,j=e.allowDownload,h=e.allowShare,v=Object(s.b)(),f=Object(s.c)(Xe),m=Object(s.c)($e),x=Object(s.c)(en),O=Object(s.c)(et),g=Object(s.c)(tt),y=Object(a.useContext)(sn),w=function(){b&&k()},k=function(){var e=mt();if(v(Le(e)),m){for(var t={},n=0,a=Object.entries(i);n<a.length;n++){var o=Object(R.a)(a[n],2),s=o[0];o[1];s in m?(t[s]=m[s],v(Ue({key:s,value:t[s]}))):s in f&&(t[s]=f[s])}y.sendMessage(JSON.stringify(on(JSON.stringify(t)))),v(Ie())}else y.sendMessage(JSON.stringify(on(JSON.stringify(f))))};Object(a.useEffect)((function(){O&&g&&(k(),v(Ve(!1)),v(Be(!1)))}),[O,g]);Object(a.useEffect)((function(){if(i)for(var e=0,t=Object.entries(i);e<t.length;e++){var n=Object(R.a)(t[e],2),a=n[0],o=n[1];a in f||("file"===o.input?v(Ue({key:a,value:[]})):"text"===o.input?v(Ue({key:a,value:o.value?o.value:""})):ce(o)||(re(o)?v(Ue({key:a,value:"output-dir"})):v(Ue({key:a,value:o.value}))))}}),[v,i,f]);var N=[],S=[];if(i&&!p){for(var _=[],T=0,P=Object.keys(i);T<P.length;T++){var C=P[T],A=C.split(".");_.push([C,parseFloat("".concat(A[1],".").concat(A[2]))])}_.sort((function(e,t){return e[1]-t[1]}));for(var L=0,D=_;L<D.length;L++){var U=D[L][0],W=i[U];ee(W)?N.push(Object(E.jsx)(kt,{widgetKey:U,disabled:o||(null===W||void 0===W?void 0:W.disabled),hidden:null===W||void 0===W?void 0:W.hidden,label:null===W||void 0===W?void 0:W.label,value:f[U],choices:null===W||void 0===W?void 0:W.choices,multi:null===W||void 0===W?void 0:W.multi,runNb:w,url_key:null===W||void 0===W?void 0:W.url_key},U)):te(W)?N.push(Object(E.jsx)(xt,{widgetKey:U,disabled:o||(null===W||void 0===W?void 0:W.disabled),hidden:null===W||void 0===W?void 0:W.hidden,label:null===W||void 0===W?void 0:W.label,value:f[U],runNb:w,url_key:null===W||void 0===W?void 0:W.url_key},U)):ne(W)?N.push(Object(E.jsx)(Ot,{widgetKey:U,disabled:o||(null===W||void 0===W?void 0:W.disabled),hidden:null===W||void 0===W?void 0:W.hidden,label:null===W||void 0===W?void 0:W.label,value:f[U],min:null===W||void 0===W?void 0:W.min,max:null===W||void 0===W?void 0:W.max,step:null===W||void 0===W?void 0:W.step,runNb:w,continuousUpdate:b,url_key:null===W||void 0===W?void 0:W.url_key},U)):ae(W)?N.push(Object(E.jsx)(Nt,{widgetKey:U,disabled:o||(null===W||void 0===W?void 0:W.disabled),hidden:null===W||void 0===W?void 0:W.hidden,label:null===W||void 0===W?void 0:W.label,value:f[U],min:null===W||void 0===W?void 0:W.min,max:null===W||void 0===W?void 0:W.max,step:null===W||void 0===W?void 0:W.step,vertical:null===W||void 0===W?void 0:W.vertical,runNb:w,url_key:null===W||void 0===W?void 0:W.url_key},U)):oe(W)?N.push(Object(E.jsx)(yt,{widgetKey:U,disabled:o||(null===W||void 0===W?void 0:W.disabled),hidden:null===W||void 0===W?void 0:W.hidden,label:null===W||void 0===W?void 0:W.label,value:f[U],min:null===W||void 0===W?void 0:W.min,max:null===W||void 0===W?void 0:W.max,step:null===W||void 0===W?void 0:W.step,vertical:null===W||void 0===W?void 0:W.vertical,runNb:w,url_key:W.url_key},U)):ie(W)?(N.push(Object(E.jsx)(At,{widgetKey:U,disabled:o||(null===W||void 0===W?void 0:W.disabled),hidden:null===W||void 0===W?void 0:W.hidden,label:null===W||void 0===W?void 0:W.label,maxFileSize:null===W||void 0===W?void 0:W.maxFileSize,value:f[U],runNb:w},U)),S.push(U)):se(W)?N.push(Object(E.jsx)(Lt,{widgetKey:U,disabled:o||(null===W||void 0===W?void 0:W.disabled),hidden:null===W||void 0===W?void 0:W.hidden,label:null===W||void 0===W?void 0:W.label,value:f[U],rows:null===W||void 0===W?void 0:W.rows,runNb:w,continuousUpdate:b,url_key:null===W||void 0===W?void 0:W.url_key,sanitize:null===W||void 0===W?void 0:W.sanitize},U)):ce(W)?N.push(Object(E.jsx)(zt,{value:W.value,disabled:o},U)):le(W)?N.push(Object(E.jsx)(pn,{widgetKey:U,disabled:o||(null===W||void 0===W?void 0:W.disabled),hidden:null===W||void 0===W?void 0:W.hidden,label:null===W||void 0===W?void 0:W.label,value:f[U],style:null===W||void 0===W?void 0:W.style,runNb:w},U)):re(W)||("apiresponse"===W.output||console.log("Unknown widget type",W))}}var I={};l&&(I={padding:"0px"});var M=void 0===t||null===t||""===t;return Object(E.jsx)("nav",{id:"sidebarMenu",className:"col-lg-3 d-md-block bg-light sidebar",style:Object(F.a)(Object(F.a)({},I),{},{overflowY:"auto"}),children:Object(E.jsx)(hn.a,{blocking:!1,message:"",children:Object(E.jsxs)("div",{className:"position-sticky p-3",children:[Object(E.jsxs)("h4",{children:[t,Object(E.jsx)("button",{className:"btn btn-sm  btn-outline-primary",type:"button",style:{float:"right",zIndex:"101"},onClick:function(){return v(V(!1))},"data-toggle":"tooltip","data-placement":"right",title:"Hide sidebar",children:Object(E.jsx)("i",{className:"fa fa-chevron-left","aria-hidden":"true"})})]}),Object(E.jsx)("div",{style:{padding:"0px"},children:Object(E.jsxs)("form",{children:[N,M&&Object(E.jsx)("div",{style:{padding:"15px"}}),Object(E.jsx)("div",{className:"form-group mb-3 pb-1 pt-2",children:!b&&Object(E.jsx)(jn,{runNb:k,waiting:o,workerState:x})}),x===Ft.UsageLimitReached&&Object(E.jsxs)("div",{className:"alert alert-info mb-3 mt-3",role:"alert",children:[Object(E.jsx)("i",{className:"fa fa-info-circle","aria-hidden":"true"})," Usage limit was reached. Please upgrade the plan."]}),x===Ft.MaxIdleTimeReached&&Object(E.jsxs)("div",{className:"alert alert-info mb-3 mt-3",role:"alert",children:[Object(E.jsx)("i",{className:"fa fa-info-circle","aria-hidden":"true"})," Your worker was idle for too long, that's why we have stopped it. Do you need a worker?",Object(E.jsx)("br",{}),Object(E.jsx)("button",{className:"btn btn-sm btn-primary my-2",onClick:function(){return window.location.reload()},children:"Restart worker"})]}),x===Ft.MaxRunTimeReached&&Object(E.jsxs)("div",{className:"alert alert-info mb-3 mt-3",role:"alert",children:[Object(E.jsx)("i",{className:"fa fa-info-circle","aria-hidden":"true"})," Your worker was running for too long, that's why we have stopped it. Do you need a worker?",Object(E.jsx)("br",{}),Object(E.jsx)("button",{className:"btn btn-sm btn-primary my-2",onClick:function(){return window.location.reload()},children:"Restart worker"})]}),o&&(x===Ft.Unknown||x===Ft.Queued)&&Object(E.jsxs)("div",{className:"alert alert-warning mb-3 mt-3",role:"alert",children:[Object(E.jsx)("i",{className:"fa fa-cogs","aria-hidden":"true"})," Waiting for worker ..."]}),o&&x===Ft.Starting&&Object(E.jsxs)("div",{className:"alert alert-success mb-3 mt-3",role:"alert",children:[Object(E.jsx)("i",{className:"fa fa-cogs","aria-hidden":"true"})," Initializing worker ..."]}),r&&Object(E.jsxs)("div",{className:"alert alert-secondary mb-3 mt-3",role:"alert",children:[Object(E.jsx)("i",{className:"fa fa-refresh","aria-hidden":"true"})," Notebook in watch mode. All changes to Notebook will be automatically visible in Mercury."]}),u&&Object(E.jsxs)("div",{className:"alert alert-primary mb-3",role:"alert",children:[Object(E.jsx)("i",{className:"fa fa-television","aria-hidden":"true"})," Click on presentation and press ",Object(E.jsx)("b",{children:"F"})," for full screen. Press"," ",Object(E.jsx)("b",{children:"Esc"})," to quit.",Object(E.jsx)("br",{}),Object(E.jsx)("br",{}),Object(E.jsx)("i",{className:"fa fa-arrows","aria-hidden":"true"})," Click on presentation and press ",Object(E.jsx)("b",{children:"Esc"})," to navigate slides."]})]})}),d&&Object(E.jsxs)("div",{children:[Object(E.jsx)("hr",{}),Object(E.jsxs)("button",{className:"btn btn-sm btn-outline-secondary",style:{border:"none"},onClick:function(){v(H("app"))},children:[Object(E.jsx)("i",{className:"fa fa-laptop","aria-hidden":"true"})," App"]}),Object(E.jsxs)("button",{className:"btn btn-sm btn-outline-secondary",style:{border:"none"},onClick:function(){v(H("files"))},children:[Object(E.jsx)("i",{className:"fa fa-folder-open-o","aria-hidden":"true"})," ","Output Files"]})]}),Object(E.jsxs)("div",{children:[Object(E.jsx)("hr",{}),Object(E.jsxs)("div",{style:{paddingLeft:"10px"},children:[Object(E.jsx)(bn,{notebookId:n,notebookPath:c,notebookTitle:t,staticNotebook:p,allowDownload:j,allowShare:h,waiting:o,continuousUpdate:b,runDownloadHTML:function(){p||y.sendMessage(JSON.stringify({purpose:"download-html"}))},runDownloadPDF:function(){p||y.sendMessage(JSON.stringify({purpose:"download-pdf"}))}})," "]})]})]})})})}var fn=n(170);function mn(e){var t=e.appView,n=e.loadingState,o=e.notebookPath,r=e.waiting,l=e.errorMsg,d=e.watchMode,u=e.displayEmbed,b=e.username,p=e.slidesHash,j=e.columnsWidth,h=e.isPresentation,v=e.fullScreen,f=function(){var e=Object(a.useState)(de()),t=Object(R.a)(e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){function e(){o(de())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}().height,m=u?f-10:f-58,x=Object(s.b)(),O=Object(s.c)(qe),g=Object(s.c)(nn),y=!1;if(void 0!==O&&void 0!==O.params&&void 0!==O.params["show-code"]&&null!==O.params["show-code"]&&(y=O.params["show-code"]),""!==g&&!h&&(g="<script>init_mathjax();<\/script>"+g,!y)){g='<style type="text/css">\n      .jp-mod-noOutputs {\n          padding: 0px; \n      }\n      .jp-mod-noInput {\n        padding-top: 0px;\n        padding-bottom: 0px;\n      }\n      </style>'+g}if(""!==g&&h&&""!==p&&-1===g.indexOf("Reveal.slide(")){var w=p.split("/"),k="";4===w.length?k="Reveal.slide(".concat(w[1],", ").concat(w[2],", ").concat(w[3],");"):3===w.length?k="Reveal.slide(".concat(w[1],", ").concat(w[2],");"):2===w.length&&(k="Reveal.slide(".concat(w[1],");")),""!==k&&(g=g.replace("setScrollingSlide);","setScrollingSlide); Reveal.on( 'ready', event => { try{ Reveal.configure({transition: \"none\"}); ".concat(k,' Reveal.configure({transition: "slide"}); } catch(error) {} } );')))}Object(a.useEffect)((function(){if(void 0!==o&&""===g){var e=o;"http://localhost:3000"===window.location.origin&&e.startsWith("/media")&&(e="http://127.0.0.1:8000"+e),window.location.origin.startsWith("https")&&(e=e.replace("http://","https://"));var t=i.a.defaults.headers.common.Authorization;e.includes("s3.amazonaws.com")&&delete i.a.defaults.headers.common.Authorization,i.a.get("".concat(e).concat(p)).then((function(e){var t=e.data;h||(t=(t=(t=(t=(t=(t=t.replace(/<head>[\s\S]*?<\/head>/,"")).replace("<html>","")).replace("</html>","")).replace("<body","<div")).replace("</body>","</div>")).replace("<!DOCTYPE html>","")),x(Qt(t))})),e.includes("s3.amazonaws.com")&&(i.a.defaults.headers.common.Authorization=t)}}),[x,o,p,h,g]);var N={paddingTop:"0px",paddingRight:"0px",paddingLeft:v?"12px":"0px",display:"files"===t?"none":"block"},S={};v||(S={maxWidth:"1140px",margin:"auto"});var _=!1;return j<12&&window.innerWidth<992&&(_=!0),Object(E.jsx)("main",{className:"ms-sm-auto col-".concat(j),style:N,children:Object(E.jsx)(hn.a,{tag:"div",blocking:!_&&r,children:Object(E.jsxs)("div",{style:S,children:["loading"===n&&!d&&Object(E.jsx)("p",{children:"Loading notebook. Please wait ..."}),"error"===n&&Object(E.jsx)("p",{style:{margin:"20px"},children:"Problem while loading notebook. Please try again later or contact Mercury administrator."}),"error"===n&&""===b&&Object(E.jsxs)("p",{style:{margin:"20px"},children:[Object(E.jsx)("h5",{children:"Please log in to see the notebook"}),Object(E.jsxs)(c.b,{to:"/login",className:"btn btn-primary btn-sm",reloadDocument:!0,children:[Object(E.jsx)("i",{className:"fa fa-sign-in","aria-hidden":"true"})," Log in"]})]}),l&&Object(E.jsxs)("div",{className:"alert alert-danger mb-3",role:"alert",children:[Object(E.jsx)("b",{children:"Notebook is executed with errors."}),Object(E.jsx)("p",{children:l})]}),""===l&&"loading"!==n&&h&&""!==g&&Object(E.jsx)("iframe",{width:"100%",height:m,srcDoc:g,title:"display",id:"main-iframe",onError:function(){console.log("iframe error")}},o),""!==g&&!h&&Object(E.jsx)(fn.a,{html:g})]})})})}var xn=n(14);function On(e){var t=e.fname,n=e.downloadLink,a=e.firstItem,o=e.lastItem;return Object(E.jsxs)("div",{style:{border:"1px solid #ddd",marginBottom:"-1px",padding:"13px",borderTopRightRadius:a?"7px":"0px",borderTopLeftRadius:a?"7px":"0px",borderBottomRightRadius:o?"7px":"0px",borderBottomLeftRadius:o?"7px":"0px"},children:[Object(E.jsx)("i",{className:"fa fa-file-text-o","aria-hidden":"true",style:{paddingRight:"5px"}})," ",t,Object(E.jsx)("div",{style:{float:"right",margin:"-4px"},children:Object(E.jsxs)("button",{style:{float:"right"},type:"button",className:"btn btn-outline-primary btn-sm",onClick:function(){return function(e,t){var n=i.a.defaults.headers.common.Authorization;e.includes("s3.amazonaws.com")&&delete i.a.defaults.headers.common.Authorization,i.a.get(e,{responseType:"blob"}).then((function(e){v()(e.data,t)})),e.includes("s3.amazonaws.com")&&(i.a.defaults.headers.common.Authorization=n)}(n,t)},children:[Object(E.jsx)("i",{className:"fa fa-download","aria-hidden":"true"})," Download"]})})]})}function gn(e){var t=e.files,n=e.filesState,a=e.waiting,o=Object(s.b)(),r=[],c=Object(xn.a)(t);c.sort();var l,d=Object(U.a)(c);try{for(d.s();!(l=d.n()).done;){var u,b=l.value,p=b.split("/").pop();if(p=null===(u=p)||void 0===u?void 0:u.split("?")[0],b&&p){var j="".concat(i.a.defaults.baseURL).concat(b);b.includes("s3.amazonaws.com")&&(j=b),r.push(Object(E.jsx)(On,{fname:p,downloadLink:j,firstItem:b===t[0],lastItem:b===t[t.length-1]}))}}}catch(h){d.e(h)}finally{d.f()}return Object(E.jsxs)("main",{className:"col-md-9 ms-sm-auto col-lg-9",style:{padding:"20px"},children:[Object(E.jsxs)("div",{className:"col-12",style:{maxWidth:"900px"},children:[Object(E.jsxs)("h3",{style:{paddingBottom:"10px"},children:[Object(E.jsx)("i",{className:"fa fa-folder-open-o","aria-hidden":"true"})," Output Files"]}),Object(E.jsx)(hn.a,{tag:"div",blocking:a,children:Object(E.jsxs)("div",{children:["loaded"===n&&r,"loaded"===n&&0===r.length&&Object(E.jsx)("div",{children:"No files available for download"}),"unknown"===n&&Object(E.jsx)("p",{children:"Please run the notebook to produce output files ..."}),"loading"===n&&Object(E.jsx)("p",{children:"Loading files please wait ..."}),"error"===n&&Object(E.jsx)("div",{className:"alert alert-danger mb-3",role:"alert",children:"There was an error during loading files. Please try to run the app again or contact the administrator."})]})})]}),Object(E.jsxs)("button",{className:"btn btn-secondary btn-sm",style:{marginTop:"20px"},onClick:function(){o(H("app"))},children:[Object(E.jsx)("i",{className:"fa fa-arrow-left","aria-hidden":"true"})," Back to App"]})]})}function yn(){return Object(E.jsx)("a",{href:"https://runmercury.com",target:"_blank",rel:"noreferrer",children:Object(E.jsxs)("div",{className:"poweredby",children:[Object(E.jsxs)("div",{className:"text-center",children:[" ",Object(E.jsx)("b",{style:{fontSize:"0.9em"},children:"created with"})," "]}),Object(E.jsx)("div",{children:Object(E.jsx)("img",{alt:"Mercury",src:"/static/mercury_black_logo.svg",style:{height:"27px"}})})]})})}function wn(e){for(var t=e.slug,n=e.widgetsParams,o=e.notebookPath,r=e.columnsWidth,c=e.taskSessionId,l=Object(a.useState)(JSON.stringify({msg:"Example output"})),b=Object(R.a)(l,2),p=b[0],j=b[1],h=Object(s.c)(Xe),v={},f=0,m=Object.entries(n);f<m.length;f++){var x=Object(R.a)(m[f],2),O=x[0];x[1].input&&(v[O]=h[O])}function g(){return(g=Object(u.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("get/".concat(c));case 3:t=e.sent,n=t.data,j(JSON.stringify(n)),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}Object(a.useEffect)((function(){c&&function(){g.apply(this,arguments)}()}),[c,o]);var y="id-with-some-random-string";c&&(y=c);var w='curl -X POST -H "Content-Type: application/json" -d \''.concat(JSON.stringify(v),"' ").concat(i.a.defaults.baseURL,"/run/").concat(t);return Object(E.jsxs)("div",{className:"ms-sm-auto col-lg-".concat(r),style:{border:"none",paddingTop:"0px",paddingRight:"0px",paddingLeft:"0px",padding:"10px"},children:[Object(E.jsx)("h4",{children:"Notebook as REST API"}),Object(E.jsx)("p",{children:"This notebook can be executed as REST API. Please see the examples below on how to access the notebook."}),Object(E.jsxs)("div",{className:"alert alert-secondary",role:"alert",children:[Object(E.jsx)("h5",{children:"POST request to execute the notebook"}),Object(E.jsx)("textarea",{disabled:!0,style:{width:"100%"},rows:3,value:w}),"The above request should return a JSON with `id`. The `id` should be used in the GET request to fetch the result.",Object(E.jsx)("br",{}),"Example response:",Object(E.jsx)("pre",{children:'{"id": "'.concat(y,'"}')})]}),Object(E.jsxs)("div",{className:"alert alert-secondary",role:"alert",children:[Object(E.jsx)("h5",{children:"GET request to get execution result in JSON"}),Object(E.jsx)("textarea",{disabled:!0,style:{width:"100%"},rows:1,value:"curl ".concat(i.a.defaults.baseURL,"/get/").concat(y)})]}),Object(E.jsxs)("div",{className:"alert alert-primary",role:"alert",children:[Object(E.jsx)("h5",{children:"Response"}),Object(E.jsx)("pre",{children:p})]})]})}function kn(){var e=Object(s.b)(),t=Object(s.c)(ft),n=Object(s.c)(vt),o=Object(s.c)(ht);return Object(a.useEffect)((function(){""!==n&&o&&(t<120?setTimeout((function(){e(function(e){return function(){var t=Object(u.a)(d.a.mark((function t(n){var a,o,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a="/api/v1/get_pdf/".concat(e,"/"),t.next=4,i.a.get(a);case 4:o=t.sent,(s=o.data).ready?(n(dt()),""!==s.error?p.b.error(s.error):x("".concat(i.a.defaults.baseURL).concat(s.url),"".concat(s.title))):n(lt()),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),p.b.error("The error occured during PDF export. ".concat(t.t0)),n(dt());case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(n))}),1e3):(e(dt()),p.b.error("Problem with PDF export. Please try again later or ask your admin for help.",{autoClose:6e3})))}),[e,t,n,o]),Object(E.jsx)("div",{})}function Nn(e){var t=e.widgetsParams,n=Object(s.b)(),a=Object(s.c)(X),o=Object(s.c)(Xe),i=!0,r="?";if(void 0!==t&&null!==t&&void 0!==o&&null!==o){for(var c=0,l=Object.entries(t);c<l.length;c++){var d=Object(R.a)(l[c],2),u=d[0],b=d[1];if(void 0!==o[u]){if((te(b)||ne(b)||oe(b)||ee(b)||ae(b)||se(b))&&null!==(null===b||void 0===b?void 0:b.url_key)&&""!==(null===b||void 0===b?void 0:b.url_key)&&(i=!1),(te(b)||ne(b)||ae(b)||se(b))&&null!==(null===b||void 0===b?void 0:b.url_key)&&""!==(null===b||void 0===b?void 0:b.url_key)&&(r+="".concat(null===b||void 0===b?void 0:b.url_key,"=").concat(o[u],"&")),oe(b)&&null!==(null===b||void 0===b?void 0:b.url_key)&&""!==(null===b||void 0===b?void 0:b.url_key)){var p=o[u];r+="".concat(null===b||void 0===b?void 0:b.url_key,"=").concat(p[0],",").concat(p[1],"&")}if(ee(b)&&null!==(null===b||void 0===b?void 0:b.url_key)&&""!==(null===b||void 0===b?void 0:b.url_key))if(null===b||void 0===b?void 0:b.multi){var j=o[u];r+="".concat(null===b||void 0===b?void 0:b.url_key,"=").concat(j.join(","),"&")}else{var h=o[u];r+="".concat(null===b||void 0===b?void 0:b.url_key,"=").concat(h,"&")}}}"?"!==r&&(r=r.slice(0,r.length-1))}return Object(E.jsx)("div",{className:"",style:{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.6)",display:a?"block":"none",zIndex:100},children:Object(E.jsx)("section",{className:"",style:{position:"fixed",width:"100%",height:"auto",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},children:Object(E.jsx)("div",{className:"modal-dialog",children:Object(E.jsxs)("div",{className:"modal-content",children:[Object(E.jsxs)("div",{className:"modal-header",children:[Object(E.jsxs)("h3",{className:"modal-title",children:[Object(E.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(E.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Object(E.jsx)("path",{d:"M6 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),Object(E.jsx)("path",{d:"M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),Object(E.jsx)("path",{d:"M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),Object(E.jsx)("path",{d:"M8.7 10.7l6.6 -3.4"}),Object(E.jsx)("path",{d:"M8.7 13.3l6.6 3.4"})]})," ","Share"]}),Object(E.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:function(){return n(J(!1))}})]}),Object(E.jsxs)("div",{className:"modal-body",children:[Object(E.jsxs)("div",{className:"py-2",children:[Object(E.jsx)("label",{children:"App address"}),Object(E.jsx)("input",{type:"text",className:"form-control",disabled:!0,value:window.location.origin+window.location.pathname})]}),!i&&Object(E.jsxs)("div",{className:"py-2",children:[Object(E.jsx)("label",{children:"App address with current paramters"}),Object(E.jsx)("textarea",{rows:5,className:"form-control",disabled:!0,value:window.location.origin+window.location.pathname+r})]}),i&&Object(E.jsxs)("div",{className:"py-2",children:["There are no ",Object(E.jsx)("code",{children:"url_key"})," defined for any widget. You can easily share URL to your notebook with preset values by using ",Object(E.jsx)("code",{children:"url_key"})," in the widget. Please check"," ",Object(E.jsx)("a",{href:"https://runmercury.com/docs/input-widgets/",target:"_blank",rel:"noreferrer",children:"documentation"}),"."]}),Object(E.jsx)("div",{className:"py-2"})]}),Object(E.jsx)("div",{className:"modal-footer",children:Object(E.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(){return n(J(!1))},children:"Close"})})]})})})})}var Sn="/static/mercury_logo.svg";var _n=function(e){e.isSingleApp;var t,n,o,r,c,l,b=e.notebookSlug,p=e.displayEmbed,j=Object(s.b)(),h=Object(s.c)(qe),v=Object(s.c)(Qe),m=Object(s.c)(bt),x=Object(s.c)(pt),O=Object(s.c)(jt),g=Object(s.c)(q),y=Object(s.c)(G),w=Object(s.c)(Y),k=Object(s.c)(P),N=Object(s.c)(T),S=Object(s.c)(Ze),_=Object(s.c)(Q),C=Object(s.c)(ht),A=Object(s.c)(tn),L=Object(s.c)(en),U=Object(s.c)(xe),W=Object(s.c)(ge),I=Object(s.c)(we),M=Object(a.useState)("loading"),H=Object(R.a)(M,2),K=H[0],J=H[1],Z=Object(s.c)(ye),X=function(){var e;return!(null===h||void 0===h||null===(e=h.params)||void 0===e?void 0:e.static_notebook)&&(L!==Ft.UsageLimitReached&&L!==Ft.MaxIdleTimeReached&&L!==Ft.MaxRunTimeReached&&L!==Ft.Running)},$=function(){return"WATCH_READY"===h.state||"WATCH_WAIT"===h.state||"WATCH_ERROR"===h.state};Object(a.useEffect)((function(){void 0!==U&&j(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var a=Object(u.a)(d.a.mark((function a(o){var s,r,c,l,u,b,p,j;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n||(o(Le("")),o(ut())),s=de(),r=s.width,o(V(r>992)),n||o(Ae("loading")),c="/api/v1/".concat(e,"/getnb/").concat(t,"/"),a.next=8,i.a.get(c);case 8:l=a.sent,u=l.data,b=JSON.parse(u.params),o(Ee(Object(F.a)(Object(F.a)({},u),{},{params:b}))),n||o(Ae("loaded")),null!==(null===b||void 0===b?void 0:b.show_sidebar)&&void 0!==(null===b||void 0===b?void 0:b.show_sidebar)&&o(V(null===b||void 0===b?void 0:b.show_sidebar)),a.next=21;break;case 16:a.prev=16,a.t0=a.catch(0),p=a.t0,n||(o(Ae("error")),404===(null===(j=p.response)||void 0===j?void 0:j.status)&&o(fe(ue.NotebookNotFound))),console.error("Problem during loading selected notebook (".concat(t,"). ").concat(a.t0));case 21:case"end":return a.stop()}}),a,null,[[0,16]])})));return function(e){return a.apply(this,arguments)}}()}(U,b))}),[j,U,b,N]),Object(a.useEffect)((function(){var e;"files"===g&&"2"===(null===h||void 0===h||null===(e=h.params)||void 0===e?void 0:e.version)&&void 0!==A&&void 0!==h.id&&j(function(e,t){return function(){var n=Object(u.a)(d.a.mark((function n(a){var o,s,r,c;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a(z("loading")),a(B([])),o=f(),s="/api/v1/worker-output-files/".concat(o,"/").concat(e,"/").concat(t,"/"),n.next=7,i.a.get(s);case 7:r=n.sent,c=r.data,a(B(c)),a(z("loaded")),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(0),a(z("error")),console.error("Problem during loading worker output files. ".concat(n.t0));case 17:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(e){return n.apply(this,arguments)}}()}(A,h.id))}),[j,g,h,A]);var ee=h.default_view_path;m.state&&"DONE"===m.state&&m.result&&(ee=m.result);var te="";m.state&&m.result&&"ERROR"===m.state&&(te=m.result),x.state&&"DONE"===x.state&&x.result&&(ee=x.result),x.state&&x.result&&"ERROR"===x.state&&(te=x.result),ee===h.default_view_path&&O.state&&"DONE"===O.state&&O.result&&(ee=O.result);var ne=!1;return h.output&&h.output.toLowerCase().startsWith("rest")&&(ne=!0),Object(a.useEffect)((function(){""===Z?J(Sn):i.a.get("/api/v1/get-style/".concat(U,"/").concat(Z)).then((function(e){var t=e.data.url;J(t)}))}),[j,Z,U]),Object(E.jsxs)("div",{className:"App",children:[!p&&Object(E.jsx)(D,{isSitePublic:W,username:k,logoSrc:K,navbarColor:I}),Object(E.jsxs)(hn.a,{blocking:C,message:"Exporting to PDF. Please wait ...",children:[C&&Object(E.jsx)(kn,{}),Object(E.jsx)("div",{className:"container-fluid",children:Object(E.jsxs)("div",{className:"row",children:[_&&Object(E.jsx)(vn,{notebookTitle:h.title,notebookId:h.id,notebookSchedule:h.schedule,taskCreatedAt:m.created_at,loadingState:v,waiting:X(),widgetsParams:null===h||void 0===h||null===(t=h.params)||void 0===t?void 0:t.params,watchMode:$(),notebookPath:ee,displayEmbed:p,showFiles:function(e){if(e)for(var t=0,n=Object.entries(e);t<n.length;t++){if(re(Object(R.a)(n[t],2)[1]))return!0}return!1}(null===h||void 0===h||null===(n=h.params)||void 0===n?void 0:n.params),isPresentation:void 0!==h.output&&"slides"===h.output,notebookParseErrors:h.errors,continuousUpdate:null===h||void 0===h||null===(o=h.params)||void 0===o?void 0:o.continuous_update,staticNotebook:null===h||void 0===h||null===(r=h.params)||void 0===r?void 0:r.static_notebook,allowDownload:function(){var e,t;return void 0===h||null===h||(void 0===(null===h||void 0===h||null===(e=h.params)||void 0===e?void 0:e.allow_download)||null===(null===h||void 0===h||null===(t=h.params)||void 0===t?void 0:t.allow_download)||h.params.allow_download)}(),allowShare:function(){var e,t;return void 0===h||null===h||(void 0===(null===h||void 0===h||null===(e=h.params)||void 0===e?void 0:e.allow_share)||null===(null===h||void 0===h||null===(t=h.params)||void 0===t?void 0:t.allow_share)||h.params.allow_share)}()}),!_&&Object(E.jsx)("div",{children:Object(E.jsx)("button",{className:"btn btn-sm  btn-outline-primary",type:"button",style:{position:"absolute",top:p?"5px":"50px",left:"5px",zIndex:"2000"},onClick:function(){return j(V(!0))},"data-toggle":"tooltip","data-placement":"right",title:"Show sidebar",children:Object(E.jsx)("i",{className:"fa fa-chevron-right","aria-hidden":"true"})})}),ne&&Object(E.jsx)(wn,{slug:h.slug,widgetsParams:null===h||void 0===h||null===(c=h.params)||void 0===c?void 0:c.params,notebookPath:ee,columnsWidth:_?9:12,taskSessionId:m.session_id}),Object(E.jsx)(mn,{appView:g,loadingState:v,notebookPath:ee,errorMsg:te,waiting:X(),watchMode:$(),displayEmbed:p,username:k,slidesHash:S,columnsWidth:_?9:12,isPresentation:void 0!==h.output&&"slides"===h.output,fullScreen:function(){var e,t;return void 0===h||null===h||(void 0===(null===h||void 0===h||null===(e=h.params)||void 0===e?void 0:e.full_screen)||null===(null===h||void 0===h||null===(t=h.params)||void 0===t?void 0:t.full_screen)||h.params.full_screen)}()}),"files"===g&&Object(E.jsx)(gn,{files:y,filesState:w,waiting:X()}),Object(E.jsx)(Nn,{widgetsParams:null===h||void 0===h||null===(l=h.params)||void 0===l?void 0:l.params})]})})]}),p&&K===Sn&&Object(E.jsx)(yn,{})]})};function Tn(){var e=Object(r.q)().slug,t=Object(r.q)().embed,n=!(!t||"embed"!==t);return Object(E.jsx)(_n,{isSingleApp:!1,notebookSlug:e,displayEmbed:n})}function Pn(e){var t=e.footerText;return Object(E.jsxs)("footer",{className:"footer",style:{position:"absolute",bottom:"0",width:"100%",height:"40px",lineHeight:"40px",backgroundColor:"#f5f5f5",borderTop:"1px solid #e5e5e5"},children:[""===t&&Object(E.jsxs)("div",{className:"container",style:{textAlign:"center"},children:[Object(E.jsxs)("span",{className:"text-muted",style:{color:"gray",float:"left"},children:[" ",Object(E.jsx)("a",{style:{textDecoration:"none",color:"gray"},href:"/openapi",children:"OpenAPI"})]}),Object(E.jsxs)("span",{className:"text-muted",style:{color:"gray",margin:"auto",display:"inline-block"},children:[" ",Object(E.jsx)("a",{style:{textDecoration:"none",color:"gray"},href:"https://runmercury.com",target:"_blank",rel:"noreferrer",children:"Notebooks served as Web Apps with Mercury"})]}),Object(E.jsxs)("span",{className:"text-muted",style:{float:"right"},children:[Object(E.jsx)("a",{style:{textDecoration:"none",color:"gray"},href:"https://github.com/mljar/mercury",target:"_blank",rel:"noreferrer",children:"Mercury"})," ",Object(E.jsx)("i",{className:"fa fa-github","aria-hidden":"true"})]})]}),""!==t&&Object(E.jsx)("div",{className:"container",style:{color:"gray",textAlign:"center"},children:Object(E.jsx)("span",{className:"text-muted",style:{color:"gray"},children:t})})]})}function Cn(e){var t=e.isSitePublic,n=e.username,a=e.logoSrc,o=e.navbarColor,i="",s={};return""===o?i="bg-dark":s={backgroundColor:o},Object(E.jsx)("header",{className:"navbar navbar-dark sticky-top p-0 ".concat(i),style:s,children:Object(E.jsxs)("div",{className:"row",style:{width:"100%",paddingRight:"0px"},children:[Object(E.jsx)("div",{className:"col-4"}),Object(E.jsxs)("div",{className:"col-4 text-center",children:[""!==a&&"loading"!==a&&Object(E.jsx)(c.b,{to:"/",children:Object(E.jsx)("img",{alt:"",src:a,style:{height:"40px"}})}),"loading"===a&&Object(E.jsx)(c.b,{to:"/",children:Object(E.jsx)("div",{style:{height:"40px"}})})]}),Object(E.jsxs)("div",{className:"col-4",style:{marginRight:"0px",paddingRight:"0px"},children:[!t&&""===n&&Object(E.jsx)(A,{}),""!==n&&Object(E.jsx)(L,{username:n})]})]})})}function Rn(){var e=Object(s.b)(),t=Object(a.useState)(""),n=Object(R.a)(t,2),o=n[0],r=n[1],c=Object(a.useState)(""),l=Object(R.a)(c,2),b=l[0],j=l[1],h=Object(a.useState)(""),v=Object(R.a)(h,2),f=v[0],m=v[1],x=Object(a.useState)("loading"),O=Object(R.a)(x,2),g=O[0],y=O[1],w=Object(s.c)(P),k=Object(s.c)(C),N=Object(s.c)(ge),S=Object(s.c)(ye),T=Object(s.c)(xe),A=Object(s.c)(we),L=Object(s.c)(ke);return document.body.style.backgroundColor="white",Object(a.useEffect)((function(){e(function(){var e=Object(u.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,i.a.get("/api/v1/auth/user/");case 4:n=e.sent,a=n.data,t(_(a)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Problem during getting user info. ".concat(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(a.useEffect)((function(){void 0!==T&&(""===S?y(Sn):i.a.get("/api/v1/get-style/".concat(T,"/").concat(S)).then((function(e){var t=e.data.url;y(t)})))}),[e,S,T]),Object(E.jsxs)("div",{className:"App",children:[Object(E.jsx)(Cn,{isSitePublic:N,username:w,logoSrc:g,navbarColor:A}),Object(E.jsx)("div",{className:"container",children:Object(E.jsxs)("div",{className:"mx-auto",style:{width:"700px"},children:[Object(E.jsxs)("div",{className:"row",style:{marginTop:"40px"},children:[Object(E.jsxs)("h2",{children:[Object(E.jsx)("i",{className:"fa fa-user","aria-hidden":"true"})," Account"]}),Object(E.jsxs)("form",{children:[Object(E.jsxs)("div",{className:"mb-3",children:[Object(E.jsx)("label",{className:"form-label",children:"Username"}),Object(E.jsx)("input",{className:"form-control",value:k.username,disabled:!0})]}),Object(E.jsxs)("div",{className:"mb-3",children:[Object(E.jsx)("label",{className:"form-label",children:"First name"}),Object(E.jsx)("input",{className:"form-control",value:k.first_name,disabled:!0})]}),Object(E.jsxs)("div",{className:"mb-3",children:[Object(E.jsx)("label",{className:"form-label",children:"Last name"}),Object(E.jsx)("input",{className:"form-control",value:k.last_name,disabled:!0})]}),Object(E.jsxs)("div",{className:"mb-3",children:[Object(E.jsx)("label",{className:"form-label",children:"Email address"}),Object(E.jsx)("input",{className:"form-control",value:k.email,disabled:!0})]})]})]}),Object(E.jsx)("hr",{}),Object(E.jsxs)("div",{className:"row",children:[Object(E.jsxs)("h2",{children:[Object(E.jsx)("i",{className:"fa fa-key","aria-hidden":"true"})," Change password"]}),Object(E.jsxs)("div",{children:[Object(E.jsxs)("div",{className:"mb-3",children:[Object(E.jsx)("label",{className:"form-label",children:"Old password"}),Object(E.jsx)("input",{type:"password",className:"form-control",value:o,onChange:function(e){return r(e.target.value)}})]}),Object(E.jsxs)("div",{className:"mb-3",children:[Object(E.jsx)("label",{className:"form-label",children:"New password"}),Object(E.jsx)("input",{type:"password",className:"form-control",value:b,onChange:function(e){return j(e.target.value)}})]}),Object(E.jsxs)("div",{className:"mb-3",children:[Object(E.jsx)("label",{className:"form-label",children:"Repeat new password"}),Object(E.jsx)("input",{type:"password",className:"form-control",value:f,onChange:function(e){return m(e.target.value)}})]}),Object(E.jsx)("div",{className:"mb-3",style:{paddingBottom:"50px"},children:Object(E.jsx)("button",{className:"btn btn-primary",onClick:function(){return e(function(e,t,n){return function(){var a=Object(u.a)(d.a.mark((function a(o){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=4,i.a.post("/api/v1/auth/password/change/",{old_password:e,new_password1:t,new_password2:n});case 4:p.b.success("Password changed successfully"),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),p.b.error("Password not changed. Problem during password change.");case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}(o,b,f))},disabled:""===o||""===b||""===f,children:"Change password"})})]})]})]})}),Object(E.jsx)(Pn,{footerText:L})]})}var En=Object(b.b)({name:"version",initialState:{fetchingIsPro:!0,isPro:!1,welcome:""},reducers:{setVersion:function(e,t){var n=t.payload.isPro;e.isPro=n,e.fetchingIsPro=!1},setWelcome:function(e,t){e.welcome=t.payload}}}),An=En.reducer,Ln=En.actions,Dn=(Ln.setVersion,Ln.setWelcome),Fn=function(e){return e.version.welcome};function Un(){var e=Object(s.b)(),t=Object(s.c)(Ke),n=Object(s.c)(Je),o=Object(s.c)(Fn),r=Object(s.c)(P),l=Object(s.c)(T),b=Object(a.useState)(""),p=Object(R.a)(b,2),j=p[0],h=p[1],v=Object(s.c)(xe),f=Object(s.c)(ge),m=Object(s.c)(Oe),x=Object(a.useState)("loading"),O=Object(R.a)(x,2),g=O[0],y=O[1],w=Object(s.c)(ye),k=Object(s.c)(we),N=Object(s.c)(ke);Object(a.useEffect)((function(){console.log({logoFilename:w}),void 0!==v&&(""===w?y(Sn):i.a.get("/api/v1/get-style/".concat(v,"/").concat(w)).then((function(e){var t=e.data.url;y(t)})))}),[e,w,v]),Object(a.useEffect)((function(){void 0!==v&&(e(nt(v)),void 0!==m&&""!==m||e(function(e){return function(){var t=Object(u.a)(d.a.mark((function t(n){var a,o,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a="/api/v1/".concat(e,"/welcome/"),t.next=4,i.a.get(a);case 4:o=t.sent,s=o.data,n(Dn(s.msg)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("Problem during loading Mercury welcome message. ".concat(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(v)))}),[e,v,l,m]);var S=function(e,t){return null!==e&&void 0!==e?e.slice(0,t)+(e.length>t?" ...":""):""},_=t.map((function(e,t){var n=e.default_view_path;return window.location.origin.startsWith("https")&&(n=n.replace("http://","https://")),"http://localhost:3000"===window.location.origin&&n.startsWith("/media")&&(n="https://127.0.0.1:8000"+n),Object(E.jsx)("div",{className:"col-md-4",style:{paddingBottom:"20px"},children:Object(E.jsxs)("div",{className:"card",children:[Object(E.jsx)("div",{style:{height:"200px",width:"100%",padding:"1px",overflow:"hidden"},children:Object(E.jsx)("iframe",{className:"thumbnailIframe",width:"200%",height:800,src:n,title:"display",scrolling:"no"})}),Object(E.jsxs)(c.b,{to:"/app/".concat(e.slug),style:{textDecoration:"none",color:"black"},className:"title-card",onMouseEnter:function(){h(e.slug)},onMouseLeave:function(){h("")},reloadDocument:!0,children:[Object(E.jsxs)("div",{className:"card-body",style:{borderTop:"1px solid rgba(0,0,0,0.1)",height:"110px"},children:[Object(E.jsx)("h5",{className:"card-title",children:S(e.title,40)}),Object(E.jsx)("p",{className:"card-text",children:S(e.params.description,100)})]}),j===e.slug&&Object(E.jsxs)("button",{className:"btn btn-outline-primary",type:"button",style:{zIndex:"101",border:"none",margin:"5px",position:"absolute",right:"0px",bottom:"0px"},"data-toggle":"tooltip","data-placement":"right",title:"Open ".concat(e.title),children:[Object(E.jsx)("i",{className:"fa fa-chevron-right","aria-hidden":"true"}),Object(E.jsx)("i",{className:"fa fa-chevron-right","aria-hidden":"true"})]})]})]})},"notebook-".concat(e.id,"}"))}));document.body.style.backgroundColor="white";var C=m;return void 0!==C&&""!==C||(C=o),Object(E.jsxs)("div",{className:"App",children:[Object(E.jsx)(Cn,{isSitePublic:f,username:r,logoSrc:g,navbarColor:k}),Object(E.jsxs)("div",{className:"container",style:{paddingBottom:"50px"},children:[""===C&&Object(E.jsx)("h1",{style:{padding:"30px",textAlign:"center"},children:"Welcome!"}),""!==C&&Object(E.jsx)("div",{style:{paddingTop:"20px",paddingBottom:"10px"},children:Object(E.jsx)(Ut.a,{rehypePlugins:[It.a,Wt.a,Mt.a,Ht.a],children:C})}),Object(E.jsxs)("div",{className:"row",children:["loading"===n&&Object(E.jsx)("p",{children:"Loading notebooks. Please wait ..."}),"loaded"===n&&0===t.length&&Object(E.jsx)("div",{children:Object(E.jsx)("p",{children:"There are no notebooks available."})}),"error"===n&&Object(E.jsx)("p",{children:"Problem while loading notebooks. Please try again later or contact Mercury administrator."}),_]})]}),Object(E.jsx)(Pn,{footerText:N})]})}function Wn(){var e=Object(s.b)(),t=Object(r.o)(),n=Object(a.useState)(""),o=Object(R.a)(n,2),c=o[0],l=o[1],b=Object(a.useState)(""),j=Object(R.a)(b,2),h=j[0],v=j[1],f=Object(s.c)(ge),m=Object(a.useState)("loading"),x=Object(R.a)(m,2),O=x[0],g=x[1],y=Object(s.c)(ye),w=Object(s.c)(xe),k=Object(s.c)(we),_=Object(s.c)(ke);document.body.style.backgroundColor="#f5f5f5";var T="/",P=Object(r.m)();if(P&&P.state){var C=P.state.from;T=C.pathname}return Object(a.useEffect)((function(){void 0!==w&&(""===y?g(Sn):i.a.get("/api/v1/get-style/".concat(w,"/").concat(y)).then((function(e){var t=e.data.url;g(t)})))}),[e,y,w]),Object(E.jsxs)("div",{className:"App",children:[Object(E.jsx)(Cn,{isSitePublic:f,username:"",logoSrc:O,navbarColor:k}),Object(E.jsxs)("div",{className:"div-signin text-center",children:[Object(E.jsxs)("form",{className:"form-signin",onSubmit:function(n){n.preventDefault(),n.stopPropagation(),e(function(e,t,n,a){return function(){var o=Object(u.a)(d.a.mark((function o(s){var r,c,l,u,b,j;return d.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=4,i.a.post("/api/v1/auth/login/",{email:e,password:t});case 4:r=o.sent,c=r.data,s(N(c.key)),s(S(e.split("@")[0])),p.b.success("Log in successfull"),a(n),o.next=16;break;case 12:o.prev=12,o.t0=o.catch(0),"Network Error"===(null===(l=o.t0)||void 0===l?void 0:l.message)?p.b.info("Problem with server connection"):(b=null===(u=l.response)||void 0===u?void 0:u.data,j="Problem during authentication. ",void 0!==b.non_field_errors&&(j+=b.non_field_errors),p.b.error(j));case 16:case"end":return o.stop()}}),o,null,[[0,12]])})));return function(e){return o.apply(this,arguments)}}()}(c,h,T,t))},children:[Object(E.jsx)("h3",{className:"h3 mb-3 font-weight-normal",children:"Please sign in"}),Object(E.jsx)("label",{className:"sr-only",children:"Email"}),Object(E.jsx)("input",{type:"email",id:"inputEmail",className:"form-control",placeholder:"Email",value:c,onChange:function(e){l(e.target.value)},required:!0}),Object(E.jsx)("label",{className:"sr-only",children:"Password"}),Object(E.jsx)("input",{type:"password",id:"inputPassword",className:"form-control",placeholder:"Password",value:h,onChange:function(e){v(e.target.value)},required:!0}),Object(E.jsxs)("button",{className:"btn btn-lg btn-primary btn-block",type:"submit",style:{margin:"5px"},disabled:""===c||""===h,children:[Object(E.jsx)("i",{className:"fa fa-sign-in","aria-hidden":"true"})," Log in"]})]}),Object(E.jsx)("div",{className:"mx-auto",style:{width:"400px",marginTop:"40px"},children:Object(E.jsxs)("p",{className:"text-muted",children:["No account? ",Object(E.jsx)("br",{})," Please contact administrator to create account for you."]})})]}),Object(E.jsx)(Pn,{footerText:_})]})}function In(){return Object(E.jsx)("div",{className:"App",children:Object(E.jsxs)("div",{style:{width:"100%",maxWidth:"500px",padding:"15px",margin:"0 auto"},children:[Object(E.jsx)("h3",{children:"Lost connection"}),Object(E.jsx)("p",{children:"App lost connection to the server. Please try again in a moment or contact administrator."})]})})}function Mn(){return Object(E.jsx)("div",{className:"App",children:Object(E.jsxs)("div",{style:{width:"100%",maxWidth:"500px",padding:"15px",margin:"0 auto"},children:[Object(E.jsx)("h3",{children:"Access forbidden"}),Object(E.jsxs)("p",{children:["Please ",Object(E.jsx)(c.b,{to:"/login",children:"login"})," to access site."]})]})})}function Hn(){return Object(E.jsx)("div",{className:"App",children:Object(E.jsx)("div",{style:{width:"100%",maxWidth:"500px",padding:"15px",margin:"0 auto"},children:Object(E.jsx)("p",{style:{color:"gray"},children:"Please wait. Loading site ..."})})})}function zn(){return Object(E.jsx)("div",{className:"App",children:Object(E.jsxs)("div",{style:{width:"100%",maxWidth:"500px",padding:"15px",margin:"0 auto"},children:[Object(E.jsx)("h3",{children:"Network Error"}),Object(E.jsx)("p",{children:"Please check if you have internet connection and server is running. In case of problems, please contact administrator."})]})})}function Bn(){return Object(E.jsx)("div",{className:"App",children:Object(E.jsxs)("div",{style:{width:"100%",maxWidth:"500px",padding:"15px",margin:"0 auto"},children:[Object(E.jsx)("h3",{children:"Site does not exist"}),Object(E.jsx)("p",{children:"We can't find site you are looking for. Please make sure that URL address is correct."})]})})}function Vn(){return Object(E.jsx)("div",{className:"App",children:Object(E.jsxs)("div",{style:{width:"100%",maxWidth:"500px",padding:"15px",margin:"0 auto"},children:[Object(E.jsx)("h3",{children:"Please refresh"}),Object(E.jsx)("p",{children:"Please try to refresh the website ..."})]})})}function Kn(){return Object(E.jsx)("div",{className:"App",children:Object(E.jsxs)("div",{style:{width:"100%",maxWidth:"500px",padding:"15px",margin:"0 auto"},children:[Object(E.jsx)("h3",{children:"Site not ready"}),Object(E.jsx)("p",{children:"Your site is not ready yet. Please refresh page in a while or check the dashboard."}),Object(E.jsx)("button",{className:"btn btn-success",onClick:function(){return window.location.reload()},children:"Refresh"})]})})}function Jn(){return Object(E.jsx)("div",{className:"App",children:Object(E.jsxs)("div",{style:{width:"100%",maxWidth:"500px",padding:"15px",margin:"0 auto"},children:[Object(E.jsx)("h3",{children:"Notebook not found"}),Object(E.jsx)("p",{children:"We can't find your notebook. Please double check the URL address and permissions."})]})})}function qn(e){var t=e.children,n=Object(s.c)(T),o=Object(s.c)(ge),i=Object(r.m)(),c=Object(s.b)(),l=Object(s.c)(me);return Object(a.useEffect)((function(){c(Ne())}),[c]),l===ue.Unknown?Object(E.jsx)(Hn,{}):l===ue.NotFound?Object(E.jsx)(Bn,{}):l===ue.NotReady?Object(E.jsx)(Kn,{}):l===ue.AccessForbidden?Object(E.jsx)(Mn,{}):l===ue.NetworkError?Object(E.jsx)(zn,{}):l===ue.PleaseRefresh?Object(E.jsx)(Vn,{}):l===ue.LostConnection?(window.location.reload(),Object(E.jsx)(In,{})):l===ue.NotebookNotFound?Object(E.jsx)(Jn,{}):o||n?t:Object(E.jsx)(r.a,{to:"/login",state:{from:i},replace:!0})}function Yn(){var e=Object(s.b)(),t=Object(s.c)(xe),n=Object(s.c)(Ke);Object(a.useEffect)((function(){void 0!==t&&e(nt(t))}),[e,t]);var o=n.map((function(e){var n="/api/v1/".concat(t,"/run/").concat(e.slug),a=Object.entries(e.params.params).map((function(e){var t=e[1];if(ae(t)){if(""!==t.url_key)return'{\n            "name": "'.concat(t.url_key,'",\n            "in": "body",\n            "description": "').concat(t.label,", value should be from range ").concat(t.min," to ").concat(t.max,'",\n            "required": false,\n            "schema": {\n                "type": "number"\n                }\n            }')}else if(ee(t)){if(""!==t.url_key)return'{\n            "name": "'.concat(t.url_key,'",\n            "in": "body",\n            "description": "').concat(t.label,", value should be from list [").concat(t.choices.join(","),']",\n            "required": false,\n            "schema": {\n                "type": "string"\n                }\n            }')}else if(te(t)){if(""!==t.url_key)return'{\n            "name": "'.concat(t.url_key,'",\n            "in": "body",\n            "description": "').concat(t.label,'",\n            "required": false,\n            "schema": {\n                "type": "boolean"\n                }\n            }')}else if(ne(t)){if(""!==t.url_key)return'{\n            "name": "'.concat(t.url_key,'",\n            "in": "body",\n            "description": "').concat(t.label,", value should be in range  ").concat(t.min," to ").concat(t.max,'",\n            "required": false,\n            "schema": {\n                "type": "number"\n                }\n            }')}else if(oe(t)){if(""!==t.url_key)return'{\n            "name": "'.concat(t.url_key,'",\n            "in": "body",\n            "description": "').concat(t.label,", parameter should be string with comma separated values, for example 3,5, allowed range is ").concat(t.min," to ").concat(t.max,'",\n            "required": false,\n            "schema": {\n                "type": "string"\n                }\n            }')}else if(se(t)&&""!==t.url_key)return'{\n            "name": "'.concat(t.url_key,'",\n            "in": "body",\n            "description": "').concat(t.label,'",\n            "required": false,\n            "schema": {\n                "type": "string"\n              }\n            }');return""})).filter((function(e){return""!==e})),o='"'.concat(n,'": {\n      "post": {\n          "operationId": "Execute notebook ').concat(e.slug,'",\n          "description": "').concat(e.params.description,'"\n       ');return a.length>0&&(o+=', "parameters": [',o+=a.join(","),o+="]"),o+=', "responses": {\n    "201": {\n        "description": "Request accepted for preprocessing, please check the processing state of the request using task_id",\n        "content": {\n            "application/json": {\n                "schema": {\n                    "type": "object",\n                    "properties": {\n                        "task_id": {\n                          "type": "string"\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }',o+="\n        }\n      }\n    "})),r=', "/api/v1/get/{task_id}": {\n    "get" : {\n      "operationId": "Get state and result of processed request",\n      "description": "Use this endpoint to check if request processing state and result",\n      "parameters": [\n        {\n          "name": "task_id",\n          "in": "path",\n          "description": "task_id of your request",\n          "required": true,\n          "schema": {\n            "type": "string"\n          }\n        }\n      ],\n      '.concat('"responses": {\n    "200": {\n        "description": "Request processing completed successfully",\n        "content": {\n            "application/json": {\n                "schema": {\n                    "type": "object",\n                    "properties": {\n                      "state": {\n                        "type": "string"\n                      },\n                      "message": {\n                        "type": "string"\n                      },\n                      "result": {\n                        "type": "string"\n                      }\n                  }\n                }\n            }\n        }\n    },\n    "202": {\n      "description": "Request is still processing, please retry in 3 seconds",\n      "content": {\n          "application/json": {\n              "schema": {\n                  "type": "object",\n                  "properties": {\n                    "state": {\n                      "type": "string"\n                    },\n                    "message": {\n                      "type": "string"\n                    }\n                  }\n                }\n              }\n            }\n          }  \n        }',"\n      }\n    }"),c='{\n    "openapi": "3.0",\n    "info": {\n        "description": "Execute Python notebook and get JSON response",\n        "title": "Mercury OpenAPI",\n        "version": "1.0.0"\n    },\n    "servers": [\n        {\n            "url": "'.concat(i.a.defaults.baseURL,'"\n        }\n    ],\n    "paths": {\n        ').concat(o.join(","),"\n        ").concat(r,"\n  }\n}");return Object(E.jsx)("pre",{children:c})}function Gn(e){var t=e.children;return Object(E.jsx)(E.Fragment,{children:t})}function Qn(){return Object(E.jsx)(qn,{children:Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(r.b,{})})})}function Zn(){var e=Object(s.b)();return Object(a.useEffect)((function(){f(!0),localStorage.getItem("token")&&e(N(localStorage.getItem("token"))),localStorage.getItem("username")&&e(S(localStorage.getItem("username"))),e(Ne())}),[]),Object(E.jsx)(c.a,{children:Object(E.jsx)(Gn,{children:Object(E.jsxs)(r.e,{children:[Object(E.jsxs)(r.c,{path:"/",element:Object(E.jsx)(Qn,{}),children:[Object(E.jsx)(r.c,{path:"/",element:Object(E.jsx)(Un,{})}),Object(E.jsx)(r.c,{path:"/app/:slug/:embed?",element:Object(E.jsx)(un,{children:Object(E.jsx)(Tn,{})})}),Object(E.jsx)(r.c,{path:"/account",element:Object(E.jsx)(Rn,{})}),Object(E.jsx)(r.c,{path:"/openapi",element:Object(E.jsx)(Yn,{})})]}),Object(E.jsx)(r.c,{path:"/login",element:Object(E.jsx)(Wn,{})})]})})})}var Xn=function(e){var t=e.store;e.history;return Object(E.jsx)(s.a,{store:t,children:Object(E.jsx)(Zn,{})})},$n=n(171),ea=n(32);var ta,na=Object($n.a)(),aa=Object(ea.b)({notebooks:Te,tasks:ot,version:An,app:I,auth:w,ws:Kt,sites:je}),oa=Object(xn.a)(Object(b.c)()),ia=(n(285),n(286),n(288),n(289),n(290),n(291),n(292),n(293),Object(b.a)({reducer:aa,middleware:oa,preloadedState:ta}));Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_LOCAL_URL:"/static"}).REACT_APP_SERVER_URL?i.a.defaults.baseURL=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_LOCAL_URL:"/static"}).REACT_APP_SERVER_URL:"http://localhost:3000"===window.location.origin?i.a.defaults.baseURL="http://127.0.0.1:8000":i.a.defaults.baseURL=window.location.origin,window.location.origin.endsWith("hf.space")&&(i.a.defaults.baseURL=window.location.origin),i.a.defaults.baseURL=i.a.defaults.baseURL.split("+")[0],i.a.defaults.baseURL=i.a.defaults.baseURL.split("?")[0],i.a.defaults.baseURL=i.a.defaults.baseURL.split("#")[0],document.addEventListener("DOMContentLoaded",(function(){return Object(o.render)(Object(E.jsxs)("div",{children:[Object(E.jsx)(Xn,{store:ia,history:na}),Object(E.jsx)(p.a,{position:"top-right",autoClose:3e3,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!0,pauseOnHover:!0})]}),document.getElementById("root"))}))}},[[294,1,2]]]);
//# sourceMappingURL=main.64038dbd.chunk.js.map
